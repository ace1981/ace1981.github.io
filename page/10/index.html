<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Ace&#39;pages">
<meta property="og:url" content="http://hujao.com/page/10/index.html">
<meta property="og:site_name" content="Ace&#39;pages">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ace&#39;pages">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://hujao.com/page/10/"/>





  <title>Ace'pages</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ace'pages</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hujao.com/2017/06/19/angularjs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ace1981">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ace'pages">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/19/angularjs/" itemprop="url">angularjs复习(未开始)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-19T13:34:00+08:00">
                2017-06-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web前端/" itemprop="url" rel="index">
                    <span itemprop="name">web前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Angularjs复习</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hujao.com/2017/05/16/elk-springboot-log4j/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ace1981">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ace'pages">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/16/elk-springboot-log4j/" itemprop="url">springboot构建elk+log4j的日志收集最简方式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-16T15:31:03+08:00">
                2017-05-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springboot/" itemprop="url" rel="index">
                    <span itemprop="name">springboot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>环境搭建参考前章</p>
<p><a href="http://hujao.com/2017/04/23/docker-elasticsearch/">docker搭建elasticsearch</a></p>
<p><a href="http://hujao.com/2017/05/15/docker-logstash/">docker构建logstash</a></p>
<p><a href="http://hujao.com/2017/05/15/docker-kibana/">docker构建kibana</a></p>
<p>修改pom.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在resources目录添加log4j.properties</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">log4j.rootLogger = INFO,logstash,CONSOLE,APPLOG,ERRORLOG</span><br><span class="line"></span><br><span class="line">log4j.appender.logstash=org.apache.log4j.net.SocketAppender</span><br><span class="line">log4j.appender.logstash.Port=3456</span><br><span class="line">log4j.appender.logstash.RemoteHost=elasticsearch_IP</span><br><span class="line">log4j.appender.logstash.ReconnectionDelay=60000</span><br><span class="line">log4j.appender.logstash.LocationInfo=true</span><br><span class="line"></span><br><span class="line">log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.CONSOLE.Target=System.out</span><br><span class="line">log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.CONSOLE.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %-5p [%t] %c %x - %m%n</span><br><span class="line"></span><br><span class="line">log4j.appender.APPLOG=org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.APPLOG.Append=true</span><br><span class="line">log4j.appender.APPLOG.DatePattern=&apos;_&apos;yyyyMMdd&apos;.log&apos;</span><br><span class="line">log4j.appender.APPLOG.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.APPLOG.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %-5p [%t] %c %x - %m%n</span><br><span class="line">log4j.appender.APPLOG.File=../logs/AppAccessLog</span><br><span class="line"></span><br><span class="line">log4j.appender.ERRORLOG=org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.ERRORLOG.Threshold=ERROR</span><br><span class="line">log4j.appender.ERRORLOG.Append=true</span><br><span class="line">log4j.appender.ERRORLOG.DatePattern=&apos;_&apos;yyyyMMdd&apos;.log&apos;</span><br><span class="line">log4j.appender.ERRORLOG.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.ERRORLOG.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %-5p [%t] %c %x - %m%n</span><br><span class="line">log4j.appender.ERRORLOG.File=../logs/AppErrorLog</span><br></pre></td></tr></table></figure>
<p>java代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(<span class="keyword">this</span>.getClass());</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hujao.com/2017/05/15/docker-logstash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ace1981">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ace'pages">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/15/docker-logstash/" itemprop="url">docker构建logstash</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-15T17:13:09+08:00">
                2017-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>创建log stash.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">   log4j &#123;</span><br><span class="line">    mode =&gt; &quot;server&quot;</span><br><span class="line">    host =&gt; &quot;0.0.0.0&quot;</span><br><span class="line">    port =&gt; 3456</span><br><span class="line">    type =&gt; &quot;log4j&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">  elasticsearch &#123; </span><br><span class="line">      hosts =&gt; [&quot;localhost:9200&quot;]</span><br><span class="line">      index =&gt; &quot;logstash-test&quot;	 </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建Dockerfile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM logstash:2.4.0</span><br><span class="line"></span><br><span class="line">COPY logstash.conf /some/config-dir/</span><br><span class="line">EXPOSE 3456</span><br><span class="line"></span><br><span class="line">CMD [&quot;-f&quot;, &quot;/some/config-dir/logstash.conf&quot;]</span><br></pre></td></tr></table></figure>
<p>构建镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t ace/logstash .</span><br></pre></td></tr></table></figure>
<p>启动容器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name &quot;mylogstash&quot; --restart always -p 3456:3456 ace/logstash</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hujao.com/2017/05/15/docker-kibana/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ace1981">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ace'pages">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/15/docker-kibana/" itemprop="url">docker构建kibana</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-15T16:48:13+08:00">
                2017-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>直接通过docker命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name mykibana -e ELASTICSEARCH_URL=http://localhost:9200 -p 5601:5601 kibana:4.5</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hujao.com/2017/05/06/java-collections/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ace1981">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ace'pages">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/06/java-collections/" itemprop="url">java集合类学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-06T02:15:46+08:00">
                2017-05-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>1. Java集合类基本概念</strong></p>
<p>在编程中，常常需要集中存放多个数据。从传统意义上讲，数组是我们的一个很好的选择，前提是我们事先已经明确知道我们将要保存的对象的数量。一旦在数组初始化时指定了这个数组长度，这个数组长度就是不可变的，如果我们需要保存一个可以动态增长的数据(在编译时无法确定具体的数量)，java的集合类就是一个很好的设计方案了。</p>
<p>集合类主要负责保存、盛装其他数据，因此集合类也被称为容器类。所以的集合类都位于java.util包下，后来为了处理多线程环境下的并发安全问题，java5还在java.util.concurrent包下提供了一些多线程支持的集合类。</p>
<p>在学习Java中的集合类的API、编程原理的时候，我们一定要明白，”集合”是一个很古老的数学概念，它远远早于Java的出现。从数学概念的角度来理解集合能帮助我们更好的理解编程中什么时候该使用什么类型的集合类。</p>
<p>Java容器类类库的用途是”保存对象”，并将其划分为两个不同的概念：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1) Collection</span><br><span class="line">一组&quot;对立&quot;的元素，通常这些元素都服从某种规则</span><br><span class="line"> 　　1.1) List必须保持元素特定的顺序</span><br><span class="line"> 　　1.2) Set不能有重复元素</span><br><span class="line"> 　　1.3) Queue保持一个队列(先进先出)的顺序</span><br><span class="line">2) Map</span><br><span class="line">一组成对的&quot;键值对&quot;对象</span><br></pre></td></tr></table></figure>
<p>Collection和Map的区别在于容器中每个位置保存的元素个数:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1) Collection 每个位置只能保存一个元素(对象)</span><br><span class="line">2) Map保存的是&quot;键值对&quot;，就像一个小型数据库。我们可以通过&quot;键&quot;找到该键对应的&quot;值&quot;</span><br></pre></td></tr></table></figure>
<p><strong>2. Java集合类架构层次关系</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">1. Interface Iterable</span><br><span class="line">迭代器接口，这是Collection类的父接口。实现这个Iterable接口的对象允许使用foreach进行遍历，也就是说，所有的Collection集合对象都具有&quot;foreach可遍历性&quot;。这个Iterable接口只</span><br><span class="line">有一个方法: iterator()。它返回一个代表当前集合对象的泛型&lt;T&gt;迭代器，用于之后的遍历操作</span><br><span class="line">1.1 Collection</span><br><span class="line">Collection是最基本的集合接口，一个Collection代表一组Object的集合，这些Object被称作Collection的元素。Collection是一个接口，用以提供规范定义，不能被实例化使用</span><br><span class="line">    1) Set</span><br><span class="line">    Set集合类似于一个罐子，&quot;丢进&quot;Set集合里的多个对象之间没有明显的顺序。Set继承自Collection接口，不能包含有重复元素(记住，这是整个Set类层次的共有属性)。</span><br><span class="line">    Set判断两个对象相同不是使用&quot;==&quot;运算符，而是根据equals方法。也就是说，我们在加入一个新元素的时候，如果这个新元素对象和Set中已有对象进行注意equals比较都返回false，　　</span><br><span class="line"> 　 则Set就会接受这个新元素对象，否则拒绝。</span><br><span class="line">    因为Set的这个制约，在使用Set集合的时候，应该注意两点：1) 为Set集合里的元素的实现类实现一个有效的equals(Object)方法、2) 对Set的构造函数，传入的Collection参数不能包</span><br><span class="line">　　含重复的元素</span><br><span class="line">        1.1) HashSet</span><br><span class="line">        HashSet是Set接口的典型实现，HashSet使用HASH算法来存储集合中的元素，因此具有良好的存取和查找性能。当向HashSet集合中存入一个元素时，HashSet会调用该对象的</span><br><span class="line">　　　　 hashCode()方法来得到该对象的hashCode值，然后根据该HashCode值决定该对象在HashSet中的存储位置。</span><br><span class="line">        值得主要的是，HashSet集合判断两个元素相等的标准是两个对象通过equals()方法比较相等，并且两个对象的hashCode()方法的返回值相等</span><br><span class="line">            1.1.1) LinkedHashSet</span><br><span class="line">            LinkedHashSet集合也是根据元素的hashCode值来决定元素的存储位置，但和HashSet不同的是，它同时使用链表维护元素的次序，这样使得元素看起来是以插入的顺序保存的。</span><br><span class="line">　　　　　　　当遍历LinkedHashSet集合里的元素时，LinkedHashSet将会按元素的添加顺序来访问集合里的元素。</span><br><span class="line">            LinkedHashSet需要维护元素的插入顺序，因此性能略低于HashSet的性能，但在迭代访问Set里的全部元素时(遍历)将有很好的性能(链表很适合进行遍历)</span><br><span class="line">        1.2) SortedSet    </span><br><span class="line">        此接口主要用于排序操作，即实现此接口的子类都属于排序的子类</span><br><span class="line">            1.2.1) TreeSet</span><br><span class="line">            TreeSet是SortedSet接口的实现类，TreeSet可以确保集合元素处于排序状态</span><br><span class="line">        1.3) EnumSet</span><br><span class="line">        EnumSet是一个专门为枚举类设计的集合类，EnumSet中所有元素都必须是指定枚举类型的枚举值，该枚举类型在创建EnumSet时显式、或隐式地指定。EnumSet的集合元素也是有序的，</span><br><span class="line">　　　　 它们以枚举值在Enum类内的定义顺序来决定集合元素的顺序</span><br><span class="line">    2) List</span><br><span class="line">    List集合代表一个元素有序、可重复的集合，集合中每个元素都有其对应的顺序索引。List集合允许加入重复元素，因为它可以通过索引来访问指定位置的集合元素。List集合默认按元素</span><br><span class="line">　　 的添加顺序设置元素的索引</span><br><span class="line">        2.1) ArrayList</span><br><span class="line">        ArrayList是基于数组实现的List类，它封装了一个动态的增长的、允许再分配的Object[]数组。</span><br><span class="line">        2.2) Vector</span><br><span class="line">        Vector和ArrayList在用法上几乎完全相同，但由于Vector是一个古老的集合，所以Vector提供了一些方法名很长的方法，但随着JDK1.2以后，java提供了系统的集合框架，就将</span><br><span class="line">　　　　 Vector改为实现List接口，统一归入集合框架体系中</span><br><span class="line">            2.2.1) Stack</span><br><span class="line">            Stack是Vector提供的一个子类，用于模拟&quot;栈&quot;这种数据结构(LIFO后进先出)</span><br><span class="line">        2.3) LinkedList</span><br><span class="line">        implements List&lt;E&gt;, Deque&lt;E&gt;。实现List接口，能对它进行队列操作，即可以根据索引来随机访问集合中的元素。同时它还实现Deque接口，即能将LinkedList当作双端队列</span><br><span class="line">　　　　 使用。自然也可以被当作&quot;栈来使用&quot;</span><br><span class="line">    3) Queue</span><br><span class="line">    Queue用于模拟&quot;队列&quot;这种数据结构(先进先出 FIFO)。队列的头部保存着队列中存放时间最长的元素，队列的尾部保存着队列中存放时间最短的元素。新元素插入(offer)到队列的尾部，</span><br><span class="line">　　 访问元素(poll)操作会返回队列头部的元素，队列不允许随机访问队列中的元素。结合生活中常见的排队就会很好理解这个概念</span><br><span class="line">        3.1) PriorityQueue</span><br><span class="line">        PriorityQueue并不是一个比较标准的队列实现，PriorityQueue保存队列元素的顺序并不是按照加入队列的顺序，而是按照队列元素的大小进行重新排序，这点从它的类名也可以</span><br><span class="line">　　　　 看出来</span><br><span class="line">        3.2) Deque</span><br><span class="line">        Deque接口代表一个&quot;双端队列&quot;，双端队列可以同时从两端来添加、删除元素，因此Deque的实现类既可以当成队列使用、也可以当成栈使用</span><br><span class="line">            3.2.1) ArrayDeque</span><br><span class="line">            是一个基于数组的双端队列，和ArrayList类似，它们的底层都采用一个动态的、可重分配的Object[]数组来存储集合元素，当集合元素超出该数组的容量时，系统会在底层重</span><br><span class="line">　　　　　　　新分配一个Object[]数组来存储集合元素</span><br><span class="line">            3.2.2) LinkedList</span><br><span class="line">1.2 Map</span><br><span class="line">Map用于保存具有&quot;映射关系&quot;的数据，因此Map集合里保存着两组值，一组值用于保存Map里的key，另外一组值用于保存Map里的value。key和value都可以是任何引用类型的数据。Map的key不允</span><br><span class="line">许重复，即同一个Map对象的任何两个key通过equals方法比较结果总是返回false。</span><br><span class="line">关于Map，我们要从代码复用的角度去理解，java是先实现了Map，然后通过包装了一个所有value都为null的Map就实现了Set集合</span><br><span class="line">Map的这些实现类和子接口中key集的存储形式和Set集合完全相同(即key不能重复)</span><br><span class="line">Map的这些实现类和子接口中value集的存储形式和List非常类似(即value可以重复、根据索引来查找)</span><br><span class="line">    1) HashMap</span><br><span class="line">    和HashSet集合不能保证元素的顺序一样，HashMap也不能保证key-value对的顺序。并且类似于HashSet判断两个key是否相等的标准也是: 两个key通过equals()方法比较返回true、</span><br><span class="line">　　 同时两个key的hashCode值也必须相等</span><br><span class="line">        1.1) LinkedHashMap</span><br><span class="line">        LinkedHashMap也使用双向链表来维护key-value对的次序，该链表负责维护Map的迭代顺序，与key-value对的插入顺序一致(注意和TreeMap对所有的key-value进行排序进行区</span><br><span class="line">分)</span><br><span class="line">    2) Hashtable</span><br><span class="line">    是一个古老的Map实现类</span><br><span class="line">        2.1) Properties </span><br><span class="line">        Properties对象在处理属性文件时特别方便(windows平台上的.ini文件)，Properties类可以把Map对象和属性文件关联起来，从而可以把Map对象中的key-value对写入到属性文</span><br><span class="line">　　　　　件中，也可以把属性文件中的&quot;属性名-属性值&quot;加载到Map对象中</span><br><span class="line">    3) SortedMap</span><br><span class="line">    正如Set接口派生出SortedSet子接口，SortedSet接口有一个TreeSet实现类一样，Map接口也派生出一个SortedMap子接口，SortedMap接口也有一个TreeMap实现类</span><br><span class="line">        3.1) TreeMap</span><br><span class="line">        TreeMap就是一个红黑树数据结构，每个key-value对即作为红黑树的一个节点。TreeMap存储key-value对(节点)时，需要根据key对节点进行排序。TreeMap可以保证所有的</span><br><span class="line">　　　　 key-value对处于有序状态。同样，TreeMap也有两种排序方式: 自然排序、定制排序</span><br><span class="line">    4) WeakHashMap</span><br><span class="line">    WeakHashMap与HashMap的用法基本相似。区别在于，HashMap的key保留了对实际对象的&quot;强引用&quot;，这意味着只要该HashMap对象不被销毁，该HashMap所引用的对象就不会被垃圾回收。</span><br><span class="line">　　但WeakHashMap的key只保留了对实际对象的弱引用，这意味着如果WeakHashMap对象的key所引用的对象没有被其他强引用变量所引用，则这些key所引用的对象可能被垃圾回收，当垃</span><br><span class="line">　　圾回收了该key所对应的实际对象之后，WeakHashMap也可能自动删除这些key所对应的key-value对</span><br><span class="line">    5) IdentityHashMap</span><br><span class="line">    IdentityHashMap的实现机制与HashMap基本相似，在IdentityHashMap中，当且仅当两个key严格相等(key1 == key2)时，IdentityHashMap才认为两个key相等</span><br><span class="line">    6) EnumMap</span><br><span class="line">    EnumMap是一个与枚举类一起使用的Map实现，EnumMap中的所有key都必须是单个枚举类的枚举值。创建EnumMap时必须显式或隐式指定它对应的枚举类。EnumMap根据key的自然顺序</span><br><span class="line">　　(即枚举值在枚举类中的定义顺序)</span><br></pre></td></tr></table></figure>
<p><img src="http://images.cnitblog.com/i/532548/201404/262238192165666.jpg" alt="img"></p>
<p><strong>3. Java集合类的应用场景代码</strong></p>
<p>学习了集合类的基本架构框架之后，我们接着来学习它们各自的应用场景、以及细节处的注意事项</p>
<p><strong>0x1: Set</strong></p>
<p><strong>*HashSet*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*; </span><br><span class="line"></span><br><span class="line">//类A的equals方法总是返回true,但没有重写其hashCode()方法。不能保证当前对象是HashSet中的唯一对象</span><br><span class="line">class A</span><br><span class="line">&#123;</span><br><span class="line">    public boolean equals(Object obj)</span><br><span class="line">    &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//类B的hashCode()方法总是返回1,但没有重写其equals()方法。不能保证当前对象是HashSet中的唯一对象</span><br><span class="line">class B</span><br><span class="line">&#123;</span><br><span class="line">    public int hashCode()</span><br><span class="line">    &#123;</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//类C的hashCode()方法总是返回2,且有重写其equals()方法</span><br><span class="line">class C</span><br><span class="line">&#123;</span><br><span class="line">    public int hashCode()</span><br><span class="line">    &#123;</span><br><span class="line">        return 2;</span><br><span class="line">    &#125;</span><br><span class="line">    public boolean equals(Object obj)</span><br><span class="line">    &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class HashSetTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        HashSet books = new HashSet();</span><br><span class="line">        //分别向books集合中添加两个A对象，两个B对象，两个C对象</span><br><span class="line">        books.add(new A());</span><br><span class="line">        books.add(new A());</span><br><span class="line"></span><br><span class="line">        books.add(new B());</span><br><span class="line">        books.add(new B());</span><br><span class="line"></span><br><span class="line">        books.add(new C());</span><br><span class="line">        books.add(new C());</span><br><span class="line">        System.out.println(books);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>result:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[B@1, B@1, C@2, A@3bc257, A@785d65]</span><br></pre></td></tr></table></figure>
<p>可以看到，如果两个对象通过equals()方法比较返回true，但这两个对象的hashCode()方法返回不同的hashCode值时，这将导致HashSet会把这两个对象保存在Hash表的不同位置，从而使对象可以添加成功，这就与Set集合的规则有些出入了。所以，我们要明确的是: equals()决定是否可以加入HashSet、而hashCode()决定存放的位置，它们两者必须同时满足才能允许一个新元素加入HashSet<br>但是要注意的是: 如果两个对象的hashCode相同，但是它们的equlas返回值不同，HashSet会在这个位置用链式结构来保存多个对象。而HashSet访问集合元素时也是根据元素的HashCode值来快速定位的，这种链式结构会导致性能下降。</p>
<p>所以如果需要把某个类的对象保存到HashSet集合中，我们在重写这个类的equlas()方法和hashCode()方法时，应该尽量保证两个对象通过equals()方法比较返回true时，它们的hashCode()方法返回值也相等</p>
<p><strong>*LinkedHashSet*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*; </span><br><span class="line"></span><br><span class="line">public class LinkedHashSetTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        LinkedHashSet books = new LinkedHashSet();</span><br><span class="line">        books.add(&quot;Java&quot;);</span><br><span class="line">        books.add(&quot;LittleHann&quot;);</span><br><span class="line">        System.out.println(books);</span><br><span class="line"></span><br><span class="line">        //删除 Java</span><br><span class="line">      books.remove(&quot;Java&quot;);</span><br><span class="line">        //重新添加 Java</span><br><span class="line">        books.add(&quot;Java&quot;);</span><br><span class="line">        System.out.println(books);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>元素的顺序总是与添加顺序一致，同时要明白的是，LinkedHashSetTest是HashSet的子类，因此它不允许集合元素重复</p>
<p><strong>*TreeSet*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class TreeSetTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        TreeSet nums = new TreeSet();</span><br><span class="line">        //向TreeSet中添加四个Integer对象</span><br><span class="line">        nums.add(5);</span><br><span class="line">        nums.add(2);</span><br><span class="line">        nums.add(10);</span><br><span class="line">        nums.add(-9);</span><br><span class="line"></span><br><span class="line">        //输出集合元素，看到集合元素已经处于排序状态</span><br><span class="line">        System.out.println(nums);</span><br><span class="line"></span><br><span class="line">        //输出集合里的第一个元素</span><br><span class="line">        System.out.println(nums.first());</span><br><span class="line"></span><br><span class="line">        //输出集合里的最后一个元素</span><br><span class="line">        System.out.println(nums.last());</span><br><span class="line"></span><br><span class="line">        //返回小于4的子集，不包含4</span><br><span class="line">        System.out.println(nums.headSet(4));</span><br><span class="line"></span><br><span class="line">        //返回大于5的子集，如果Set中包含5，子集中还包含5</span><br><span class="line">        System.out.println(nums.tailSet(5));</span><br><span class="line"></span><br><span class="line">        //返回大于等于-3，小于4的子集。</span><br><span class="line">        System.out.println(nums.subSet(-3 , 4));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>与HashSet集合采用hash算法来决定元素的存储位置不同，TreeSet采用红黑树的数据结构来存储集合元素。TreeSet支持两种排序方式: 自然排序、定制排序</p>
<p><strong>1. 自然排序:</strong></p>
<p>TreeSet会调用集合元素的compareTo(Object obj)方法来比较元素之间的大小关系，然后将集合元素按升序排序，即自然排序。如果试图把一个对象添加到TreeSet时，则该对象的类必须实现Comparable接口，否则程序会抛出异常。</p>
<p>当把一个对象加入TreeSet集合中时，TreeSet会调用该对象的compareTo(Object obj)方法与容器中的其他对象比较大小，然后根据红黑树结构找到它的存储位置。如果两个对象通过compareTo(Object obj)方法比较相等，新对象将无法添加到TreeSet集合中(牢记Set是不允许重复的概念)。</p>
<p>注意: 当需要把一个对象放入TreeSet中，重写该对象对应类的equals()方法时，应该保证该方法与compareTo(Object obj)方法有一致的结果，即如果两个对象通过equals()方法比较返回true时，这两个对象通过compareTo(Object obj)方法比较结果应该也为0(即相等)</p>
<p>看到这里，我们应该明白：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1) 对与Set来说，它定义了equals()为唯一性判断的标准，而对于到了具体的实现，HashSet、TreeSet来说，它们又会有自己特有的唯一性判断标准，只有同时满足了才能判定为唯一性</span><br><span class="line">2) 我们在操作这些集合类的时候，对和唯一性判断有关的函数重写要重点关注</span><br></pre></td></tr></table></figure>
<p><strong> 2. 定制排序</strong></p>
<p>TreeSet的自然排序是根据集合元素的大小，TreeSet将它们以升序排序。如果我们需要实现定制排序，则可以通过Comparator接口的帮助(类似PHP中的array_map回调处理函数的思想)。该接口里包含一个int compare(T o1， T o2)方法，该方法用于比较大小</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">class M</span><br><span class="line">&#123;</span><br><span class="line">    int age;</span><br><span class="line">    public M(int age)</span><br><span class="line">    &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    public String toString()</span><br><span class="line">    &#123;</span><br><span class="line">        return &quot;M[age:&quot; + age + &quot;]&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class TreeSetTest4</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        TreeSet ts = new TreeSet(new Comparator()</span><br><span class="line">        &#123;</span><br><span class="line">            //根据M对象的age属性来决定大小</span><br><span class="line">            public int compare(Object o1, Object o2)</span><br><span class="line">            &#123;</span><br><span class="line">                M m1 = (M)o1;</span><br><span class="line">                M m2 = (M)o2;</span><br><span class="line">                return m1.age &gt; m2.age ? -1</span><br><span class="line">                    : m1.age &lt; m2.age ? 1 : 0;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);    </span><br><span class="line">        ts.add(new M(5));</span><br><span class="line">        ts.add(new M(-3));</span><br><span class="line">        ts.add(new M(9));</span><br><span class="line">        System.out.println(ts);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看到这里，我们需要梳理一下关于排序的概念</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1) equals、compareTo决定的是怎么比的问题，即用什么field进行大小比较</span><br><span class="line">2) 自然排序、定制排序、Comparator决定的是谁大的问题，即按什么顺序(升序、降序)进行排序</span><br><span class="line">它们的关注点是不同的，一定要注意区分</span><br></pre></td></tr></table></figure>
<p><strong>*EnumSet*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">enum Season</span><br><span class="line">&#123;</span><br><span class="line">    SPRING,SUMMER,FALL,WINTER</span><br><span class="line">&#125;</span><br><span class="line">public class EnumSetTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        //创建一个EnumSet集合，集合元素就是Season枚举类的全部枚举值</span><br><span class="line">        EnumSet es1 = EnumSet.allOf(Season.class);</span><br><span class="line">        //输出[SPRING,SUMMER,FALL,WINTER]</span><br><span class="line">        System.out.println(es1);</span><br><span class="line"></span><br><span class="line">        //创建一个EnumSet空集合，指定其集合元素是Season类的枚举值。</span><br><span class="line">        EnumSet es2 = EnumSet.noneOf(Season.class); </span><br><span class="line">        //输出[]</span><br><span class="line">        System.out.println(es2); </span><br><span class="line">        //手动添加两个元素</span><br><span class="line">        es2.add(Season.WINTER);</span><br><span class="line">        es2.add(Season.SPRING);</span><br><span class="line">        //输出[SPRING,WINTER]</span><br><span class="line">        System.out.println(es2);</span><br><span class="line"></span><br><span class="line">        //以指定枚举值创建EnumSet集合</span><br><span class="line">        EnumSet es3 = EnumSet.of(Season.SUMMER , Season.WINTER); </span><br><span class="line">        //输出[SUMMER,WINTER]</span><br><span class="line">        System.out.println(es3);</span><br><span class="line"></span><br><span class="line">        EnumSet es4 = EnumSet.range(Season.SUMMER , Season.WINTER); </span><br><span class="line">        //输出[SUMMER,FALL,WINTER]</span><br><span class="line">        System.out.println(es4);</span><br><span class="line"></span><br><span class="line">        //新创建的EnumSet集合的元素和es4集合的元素有相同类型，</span><br><span class="line">        //es5的集合元素 + es4集合元素 = Season枚举类的全部枚举值</span><br><span class="line">        EnumSet es5 = EnumSet.complementOf(es4); </span><br><span class="line">        //输出[SPRING]</span><br><span class="line">        System.out.println(es5);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上就是Set集合类的编程应用场景。那么应该怎样选择何时使用这些集合类呢？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1) HashSet的性能总是比TreeSet好(特别是最常用的添加、查询元素等操作)，因为TreeSet需要额外的红黑树算法来维护集合元素的次序。只有当需要一个保持排序的Set时，才应该使用TreeSet，否则都应该使用HashSet</span><br><span class="line">2) 对于普通的插入、删除操作，LinkedHashSet比HashSet要略慢一点，这是由维护链表所带来的开销造成的。不过，因为有了链表的存在，遍历LinkedHashSet会更快</span><br><span class="line">3) EnumSet是所有Set实现类中性能最好的，但它只能保存同一个枚举类的枚举值作为集合元素</span><br><span class="line">4) HashSet、TreeSet、EnumSet都是&quot;线程不安全&quot;的，通常可以通过Collections工具类的synchronizedSortedSet方法来&quot;包装&quot;该Set集合。</span><br><span class="line">SortedSet s = Collections.synchronizedSortedSet(new TreeSet(...));</span><br></pre></td></tr></table></figure>
<p><strong>0x2: List</strong></p>
<p><strong>*ArrayList*</strong></p>
<p>如果一开始就知道ArrayList集合需要保存多少元素，则可以在创建它们时就指定initialCapacity大小，这样可以减少重新分配的次数，提供性能，ArrayList还提供了如下方法来重新分配Object[]数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1) ensureCapacity(int minCapacity): 将ArrayList集合的Object[]数组长度增加minCapacity</span><br><span class="line">2) trimToSize(): 调整ArrayList集合的Object[]数组长度为当前元素的个数。程序可以通过此方法来减少ArrayList集合对象占用的内存空间</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class ListTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        List books = new ArrayList();</span><br><span class="line">        //向books集合中添加三个元素</span><br><span class="line">        books.add(new String(&quot;轻量级Java EE企业应用实战&quot;));</span><br><span class="line">        books.add(new String(&quot;疯狂Java讲义&quot;));</span><br><span class="line">        books.add(new String(&quot;疯狂Android讲义&quot;));</span><br><span class="line">        System.out.println(books);</span><br><span class="line"></span><br><span class="line">        //将新字符串对象插入在第二个位置</span><br><span class="line">        books.add(1 , new String(&quot;疯狂Ajax讲义&quot;));</span><br><span class="line">        for (int i = 0 ; i &lt; books.size() ; i++ )</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(books.get(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //删除第三个元素</span><br><span class="line">        books.remove(2);</span><br><span class="line">        System.out.println(books);</span><br><span class="line"></span><br><span class="line">        //判断指定元素在List集合中位置：输出1，表明位于第二位</span><br><span class="line">        System.out.println(books.indexOf(new String(&quot;疯狂Ajax讲义&quot;)));  //①</span><br><span class="line">        //将第二个元素替换成新的字符串对象</span><br><span class="line">        books.set(1, new String(&quot;LittleHann&quot;));</span><br><span class="line">        System.out.println(books);</span><br><span class="line"></span><br><span class="line">        //将books集合的第二个元素（包括）</span><br><span class="line">        //到第三个元素（不包括）截取成子集合</span><br><span class="line">        System.out.println(books.subList(1 , 2));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>Stack</em></strong></p>
<p>注意Stack的后进先出的特点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class VectorTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        Stack v = new Stack();</span><br><span class="line">        //依次将三个元素push入&quot;栈&quot;</span><br><span class="line">        v.push(&quot;疯狂Java讲义&quot;);</span><br><span class="line">        v.push(&quot;轻量级Java EE企业应用实战&quot;);</span><br><span class="line">        v.push(&quot;疯狂Android讲义&quot;);</span><br><span class="line"></span><br><span class="line">        //输出：[疯狂Java讲义, 轻量级Java EE企业应用实战 , 疯狂Android讲义]</span><br><span class="line">        System.out.println(v);</span><br><span class="line"></span><br><span class="line">        //访问第一个元素，但并不将其pop出&quot;栈&quot;，输出：疯狂Android讲义</span><br><span class="line">        System.out.println(v.peek());</span><br><span class="line"></span><br><span class="line">        //依然输出：[疯狂Java讲义, 轻量级Java EE企业应用实战 , 疯狂Android讲义]</span><br><span class="line">        System.out.println(v);</span><br><span class="line"></span><br><span class="line">        //pop出第一个元素，输出：疯狂Android讲义</span><br><span class="line">        System.out.println(v.pop());</span><br><span class="line"></span><br><span class="line">        //输出：[疯狂Java讲义, 轻量级Java EE企业应用实战]</span><br><span class="line">        System.out.println(v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>*LinkedList*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class LinkedListTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        LinkedList books = new LinkedList();</span><br><span class="line"></span><br><span class="line">        //将字符串元素加入队列的尾部(双端队列)</span><br><span class="line">        books.offer(&quot;疯狂Java讲义&quot;);</span><br><span class="line"></span><br><span class="line">        //将一个字符串元素加入栈的顶部(双端队列)</span><br><span class="line">        books.push(&quot;轻量级Java EE企业应用实战&quot;);</span><br><span class="line"></span><br><span class="line">        //将字符串元素添加到队列的头(相当于栈的顶部)</span><br><span class="line">        books.offerFirst(&quot;疯狂Android讲义&quot;);</span><br><span class="line"></span><br><span class="line">        for (int i = 0; i &lt; books.size() ; i++ )</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(books.get(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //访问、并不删除栈顶的元素</span><br><span class="line">        System.out.println(books.peekFirst());</span><br><span class="line">        //访问、并不删除队列的最后一个元素</span><br><span class="line">        System.out.println(books.peekLast());</span><br><span class="line">        //将栈顶的元素弹出&quot;栈&quot;</span><br><span class="line">        System.out.println(books.pop());</span><br><span class="line">        //下面输出将看到队列中第一个元素被删除</span><br><span class="line">        System.out.println(books);</span><br><span class="line">        //访问、并删除队列的最后一个元素</span><br><span class="line">        System.out.println(books.pollLast());</span><br><span class="line">        //下面输出将看到队列中只剩下中间一个元素：</span><br><span class="line">        //轻量级Java EE企业应用实战</span><br><span class="line">        System.out.println(books);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从代码中我们可以看到，LinkedList同时表现出了双端队列、栈的用法。功能非常强大</p>
<p><strong>0x3: Queue</strong></p>
<p><strong>*PriorityQueue*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class PriorityQueueTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        PriorityQueue pq = new PriorityQueue();</span><br><span class="line">        //下面代码依次向pq中加入四个元素</span><br><span class="line">        pq.offer(6);</span><br><span class="line">        pq.offer(-3);</span><br><span class="line">        pq.offer(9);</span><br><span class="line">        pq.offer(0);</span><br><span class="line"></span><br><span class="line">        //输出pq队列，并不是按元素的加入顺序排列，</span><br><span class="line">        //而是按元素的大小顺序排列，输出[-3, 0, 9, 6]</span><br><span class="line">        System.out.println(pq);</span><br><span class="line">        //访问队列第一个元素，其实就是队列中最小的元素：-3</span><br><span class="line">        System.out.println(pq.poll());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>PriorityQueue不允许插入null元素，它还需要对队列元素进行排序，PriorityQueue的元素有两种排序方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1) 自然排序:</span><br><span class="line">采用自然顺序的PriorityQueue集合中的元素对象都必须实现了Comparable接口，而且应该是同一个类的多个实例，否则可能导致ClassCastException异常</span><br><span class="line">2) 定制排序</span><br><span class="line">创建PriorityQueue队列时，传入一个Comparator对象，该对象负责对队列中的所有元素进行排序</span><br><span class="line">关于自然排序、定制排序的原理和之前说的TreeSet类似</span><br></pre></td></tr></table></figure>
<p><strong>* ArrayDeque*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class ArrayDequeTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        ArrayDeque stack = new ArrayDeque();</span><br><span class="line">        //依次将三个元素push入&quot;栈&quot;</span><br><span class="line">        stack.push(&quot;疯狂Java讲义&quot;);</span><br><span class="line">        stack.push(&quot;轻量级Java EE企业应用实战&quot;);</span><br><span class="line">        stack.push(&quot;疯狂Android讲义&quot;);</span><br><span class="line"></span><br><span class="line">        //输出：[疯狂Java讲义, 轻量级Java EE企业应用实战 , 疯狂Android讲义]</span><br><span class="line">        System.out.println(stack);</span><br><span class="line"></span><br><span class="line">        //访问第一个元素，但并不将其pop出&quot;栈&quot;，输出：疯狂Android讲义</span><br><span class="line">        System.out.println(stack.peek());</span><br><span class="line"></span><br><span class="line">        //依然输出：[疯狂Java讲义, 轻量级Java EE企业应用实战 , 疯狂Android讲义]</span><br><span class="line">        System.out.println(stack);</span><br><span class="line"></span><br><span class="line">        //pop出第一个元素，输出：疯狂Android讲义</span><br><span class="line">        System.out.println(stack.pop());</span><br><span class="line"></span><br><span class="line">        //输出：[疯狂Java讲义, 轻量级Java EE企业应用实战]</span><br><span class="line">        System.out.println(stack);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上就是List集合类的编程应用场景。我们来梳理一下思路</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. java提供的List就是一个&quot;线性表接口&quot;，ArrayList(基于数组的线性表)、LinkedList(基于链的线性表)是线性表的两种典型实现</span><br><span class="line">2. Queue代表了队列，Deque代表了双端队列(既可以作为队列使用、也可以作为栈使用)</span><br><span class="line">3. 因为数组以一块连续内存来保存所有的数组元素，所以数组在随机访问时性能最好。所以的内部以数组作为底层实现的集合在随机访问时性能最好。</span><br><span class="line">4. 内部以链表作为底层实现的集合在执行插入、删除操作时有很好的性能</span><br><span class="line">5. 进行迭代操作时，以链表作为底层实现的集合比以数组作为底层实现的集合性能好</span><br></pre></td></tr></table></figure>
<p>我们之前说过，Collection接口继承了Iterable接口，也就是说，我们以上学习到的所有的Collection集合类都具有”可遍历性”</p>
<p>Iterable接口也是java集合框架的成员，它隐藏了各种Collection实现类的底层细节，向应用程序提供了遍历Collection集合元素的统一编程接口:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1) boolean hasNext(): 是否还有下一个未遍历过的元素</span><br><span class="line">2) Object next(): 返回集合里的下一个元素</span><br><span class="line">3) void remove(): 删除集合里上一次next方法返回的元素</span><br></pre></td></tr></table></figure>
<p><strong>iterator实现遍历:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class IteratorTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        //创建一个集合</span><br><span class="line">        Collection books = new HashSet();</span><br><span class="line">        books.add(&quot;轻量级Java EE企业应用实战&quot;);</span><br><span class="line">        books.add(&quot;疯狂Java讲义&quot;);</span><br><span class="line">        books.add(&quot;疯狂Android讲义&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //获取books集合对应的迭代器</span><br><span class="line">        Iterator it = books.iterator();</span><br><span class="line">        while(it.hasNext())</span><br><span class="line">        &#123;</span><br><span class="line">            //it.next()方法返回的数据类型是Object类型，</span><br><span class="line">            //需要强制类型转换</span><br><span class="line">            String book = (String)it.next();</span><br><span class="line">            System.out.println(book);</span><br><span class="line">            if (book.equals(&quot;疯狂Java讲义&quot;))</span><br><span class="line">            &#123;</span><br><span class="line">                //从集合中删除上一次next方法返回的元素</span><br><span class="line">                it.remove();</span><br><span class="line">            &#125;</span><br><span class="line">            //对book变量赋值，不会改变集合元素本身</span><br><span class="line">            book = &quot;测试字符串&quot;;    </span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(books);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从代码可以看出，iterator必须依附于Collection对象，若有一个iterator对象，必然有一个与之关联的Collection对象。</p>
<p>除了可以使用iterator接口迭代访问Collection集合里的元素之外，使用java5提供的foreach循环迭代访问集合元素更加便捷</p>
<p><strong>foreach实现遍历:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class ForeachTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        //创建一个集合</span><br><span class="line">        Collection books = new HashSet();</span><br><span class="line">        books.add(new String(&quot;轻量级Java EE企业应用实战&quot;));</span><br><span class="line">        books.add(new String(&quot;疯狂Java讲义&quot;));</span><br><span class="line">        books.add(new String(&quot;疯狂Android讲义&quot;));</span><br><span class="line"></span><br><span class="line">        for (Object obj : books)</span><br><span class="line">        &#123;</span><br><span class="line">            //此处的book变量也不是集合元素本身</span><br><span class="line">            String book = (String)obj;</span><br><span class="line">            System.out.println(book);</span><br><span class="line">            if (book.equals(&quot;疯狂Android讲义&quot;))</span><br><span class="line">            &#123;</span><br><span class="line">                //下面代码会引发ConcurrentModificationException异常</span><br><span class="line">                //books.remove(book);      </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(books);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除了Collection固有的iterator()方法，List还额外提供了一个listIterator()方法，该方法返回一个ListIterator对象，ListIterator接口继承了Iterator接口，提供了专门操作List的方法。ListIterator接口在Iterator接口的继承上增加了如下方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1) boolean hasPrevious(): 返回该迭代器关联的集合是否还有上一个元素</span><br><span class="line">2) Object previous(): 返回该迭代器的上一个元素(向前迭代)</span><br><span class="line">3) void add(): 在指定位置插入一个元素</span><br></pre></td></tr></table></figure>
<p><strong>ListIterator实现遍历:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class ListIteratorTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        String[] books = &#123;</span><br><span class="line">            &quot;疯狂Java讲义&quot;,</span><br><span class="line">            &quot;轻量级Java EE企业应用实战&quot;</span><br><span class="line">        &#125;;</span><br><span class="line">        List bookList = new ArrayList();</span><br><span class="line">        for (int i = 0; i &lt; books.length ; i++ )</span><br><span class="line">        &#123;</span><br><span class="line">            bookList.add(books[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        ListIterator lit = bookList.listIterator();</span><br><span class="line">        while (lit.hasNext())</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(lit.next());</span><br><span class="line">            lit.add(&quot;-------分隔符-------&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;=======下面开始反向迭代=======&quot;);</span><br><span class="line">        while(lit.hasPrevious())</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(lit.previous());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>0x4: Map</strong></p>
<p><strong>*HashMap、Hashtable*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">class A</span><br><span class="line">&#123;</span><br><span class="line">    int count;</span><br><span class="line">    public A(int count)</span><br><span class="line">    &#123;</span><br><span class="line">        this.count = count;</span><br><span class="line">    &#125;</span><br><span class="line">    //根据count的值来判断两个对象是否相等。</span><br><span class="line">    public boolean equals(Object obj)</span><br><span class="line">    &#123;</span><br><span class="line">        if (obj == this)</span><br><span class="line">            return true;</span><br><span class="line">        if (obj!=null &amp;&amp;</span><br><span class="line">            obj.getClass()==A.class)</span><br><span class="line">        &#123;</span><br><span class="line">            A a = (A)obj;</span><br><span class="line">            return this.count == a.count;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    //根据count来计算hashCode值。</span><br><span class="line">    public int hashCode()</span><br><span class="line">    &#123;</span><br><span class="line">        return this.count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class B</span><br><span class="line">&#123;</span><br><span class="line">    //重写equals()方法，B对象与任何对象通过equals()方法比较都相等</span><br><span class="line">    public boolean equals(Object obj)</span><br><span class="line">    &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class HashtableTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        Hashtable ht = new Hashtable();</span><br><span class="line">        ht.put(new A(60000) , &quot;疯狂Java讲义&quot;);</span><br><span class="line">        ht.put(new A(87563) , &quot;轻量级Java EE企业应用实战&quot;);</span><br><span class="line">        ht.put(new A(1232) , new B());</span><br><span class="line">        System.out.println(ht);</span><br><span class="line"></span><br><span class="line">        //只要两个对象通过equals比较返回true，</span><br><span class="line">        //Hashtable就认为它们是相等的value。</span><br><span class="line">        //由于Hashtable中有一个B对象，</span><br><span class="line">        //它与任何对象通过equals比较都相等，所以下面输出true。</span><br><span class="line">        System.out.println(ht.containsValue(&quot;测试字符串&quot;));  //①</span><br><span class="line"></span><br><span class="line">        //只要两个A对象的count相等，它们通过equals比较返回true，且hashCode相等</span><br><span class="line">        //Hashtable即认为它们是相同的key，所以下面输出true。</span><br><span class="line">        System.out.println(ht.containsKey(new A(87563)));   //②</span><br><span class="line"></span><br><span class="line">        //下面语句可以删除最后一个key-value对</span><br><span class="line">        ht.remove(new A(1232));    //③</span><br><span class="line"></span><br><span class="line">        //通过返回Hashtable的所有key组成的Set集合，</span><br><span class="line">        //从而遍历Hashtable每个key-value对</span><br><span class="line">        for (Object key : ht.keySet())</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.print(key + &quot;----&gt;&quot;);</span><br><span class="line">            System.out.print(ht.get(key) + &quot;\n&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当使用自定义类作为HashMap、Hashtable的key时，如果重写该类的equals(Object obj)和hashCode()方法，则应该保证两个方法的判断标准一致–当两个key通过equals()方法比较返回true时，两个key的hashCode()的返回值也应该相同</p>
<p><strong>*LinkedHashMap*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class LinkedHashMapTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        LinkedHashMap scores = new LinkedHashMap();</span><br><span class="line">        scores.put(&quot;语文&quot; , 80);</span><br><span class="line">        scores.put(&quot;英文&quot; , 82);</span><br><span class="line">        scores.put(&quot;数学&quot; , 76);</span><br><span class="line">        //遍历scores里的所有的key-value对</span><br><span class="line">        for (Object key : scores.keySet())</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(key + &quot;------&gt;&quot; + scores.get(key));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>*Properties*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line">import java.io.*;</span><br><span class="line"></span><br><span class="line">public class PropertiesTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) throws Exception</span><br><span class="line">    &#123;</span><br><span class="line">        Properties props = new Properties();</span><br><span class="line">        //向Properties中增加属性</span><br><span class="line">        props.setProperty(&quot;username&quot; , &quot;yeeku&quot;);</span><br><span class="line">        props.setProperty(&quot;password&quot; , &quot;123456&quot;);</span><br><span class="line"></span><br><span class="line">        //将Properties中的key-value对保存到a.ini文件中</span><br><span class="line">        props.store(new FileOutputStream(&quot;a.ini&quot;), &quot;comment line&quot;);   //①</span><br><span class="line"></span><br><span class="line">        //新建一个Properties对象</span><br><span class="line">        Properties props2 = new Properties();</span><br><span class="line">        //向Properties中增加属性</span><br><span class="line">        props2.setProperty(&quot;gender&quot; , &quot;male&quot;);</span><br><span class="line"></span><br><span class="line">        //将a.ini文件中的key-value对追加到props2中</span><br><span class="line">        props2.load(new FileInputStream(&quot;a.ini&quot;) );    //②</span><br><span class="line">        System.out.println(props2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Properties还可以把key-value对以XML文件的形式保存起来，也可以从XML文件中加载key-value对</p>
<p><strong>*TreeMap*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">class R implements Comparable</span><br><span class="line">&#123;</span><br><span class="line">    int count;</span><br><span class="line">    public R(int count)</span><br><span class="line">    &#123;</span><br><span class="line">        this.count = count;</span><br><span class="line">    &#125;</span><br><span class="line">    public String toString()</span><br><span class="line">    &#123;</span><br><span class="line">        return &quot;R[count:&quot; + count + &quot;]&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    //根据count来判断两个对象是否相等。</span><br><span class="line">    public boolean equals(Object obj)</span><br><span class="line">    &#123;</span><br><span class="line">        if (this == obj)</span><br><span class="line">            return true;</span><br><span class="line">        if (obj!=null</span><br><span class="line">            &amp;&amp; obj.getClass()==R.class)</span><br><span class="line">        &#123;</span><br><span class="line">            R r = (R)obj;</span><br><span class="line">            return r.count == this.count;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    //根据count属性值来判断两个对象的大小。</span><br><span class="line">    public int compareTo(Object obj)</span><br><span class="line">    &#123;</span><br><span class="line">        R r = (R)obj;</span><br><span class="line">        return count &gt; r.count ? 1 :</span><br><span class="line">            count &lt; r.count ? -1 : 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class TreeMapTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        TreeMap tm = new TreeMap();</span><br><span class="line">        tm.put(new R(3) , &quot;轻量级Java EE企业应用实战&quot;);</span><br><span class="line">        tm.put(new R(-5) , &quot;疯狂Java讲义&quot;);</span><br><span class="line">        tm.put(new R(9) , &quot;疯狂Android讲义&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(tm);</span><br><span class="line"></span><br><span class="line">        //返回该TreeMap的第一个Entry对象</span><br><span class="line">        System.out.println(tm.firstEntry());</span><br><span class="line"></span><br><span class="line">        //返回该TreeMap的最后一个key值</span><br><span class="line">        System.out.println(tm.lastKey());</span><br><span class="line"></span><br><span class="line">        //返回该TreeMap的比new R(2)大的最小key值。</span><br><span class="line">        System.out.println(tm.higherKey(new R(2)));</span><br><span class="line"></span><br><span class="line">        //返回该TreeMap的比new R(2)小的最大的key-value对。</span><br><span class="line">        System.out.println(tm.lowerEntry(new R(2)));</span><br><span class="line"></span><br><span class="line">        //返回该TreeMap的子TreeMap</span><br><span class="line">        System.out.println(tm.subMap(new R(-1) , new R(4)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从代码中可以看出，类似于TreeSet中判断两个元素是否相等的标准，TreeMap中判断两个key相等的标准是: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1) 两个key通过compareTo()方法返回0</span><br><span class="line">2) equals()放回true</span><br></pre></td></tr></table></figure>
<p>我们在重写这两个方法的时候一定要保证它们的逻辑关系一致。</p>
<p>再次强调一下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set和Map的关系十分密切，java源码就是先实现了HashMap、TreeMap等集合，然后通过包装一个所有的value都为null的Map集合实现了Set集合类</span><br></pre></td></tr></table></figure>
<p><strong>*WeakHashMap*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class WeakHashMapTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        WeakHashMap whm = new WeakHashMap();</span><br><span class="line">        //将WeakHashMap中添加三个key-value对，</span><br><span class="line">        //三个key都是匿名字符串对象（没有其他引用）</span><br><span class="line">        whm.put(new String(&quot;语文&quot;) , new String(&quot;良好&quot;));</span><br><span class="line">        whm.put(new String(&quot;数学&quot;) , new String(&quot;及格&quot;));</span><br><span class="line">        whm.put(new String(&quot;英文&quot;) , new String(&quot;中等&quot;));</span><br><span class="line"></span><br><span class="line">        //将WeakHashMap中添加一个key-value对，</span><br><span class="line">        //该key是一个系统缓存的字符串对象。&quot;java&quot;是一个常量字符串强引用</span><br><span class="line">        whm.put(&quot;java&quot; , new String(&quot;中等&quot;));</span><br><span class="line">        //输出whm对象，将看到4个key-value对。</span><br><span class="line">        System.out.println(whm);</span><br><span class="line">        //通知系统立即进行垃圾回收</span><br><span class="line">        System.gc();</span><br><span class="line">        System.runFinalization();</span><br><span class="line">        //通常情况下，将只看到一个key-value对。</span><br><span class="line">        System.out.println(whm);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果需要使用WeakHashMap的key来保留对象的弱引用，则不要让key所引用的对象具有任何强引用，否则将失去使用WeakHashMap的意义</p>
<p><strong>*IdentityHashMap*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class IdentityHashMapTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        IdentityHashMap ihm = new IdentityHashMap();</span><br><span class="line">        //下面两行代码将会向IdentityHashMap对象中添加两个key-value对</span><br><span class="line">        ihm.put(new String(&quot;语文&quot;) , 89);</span><br><span class="line">        ihm.put(new String(&quot;语文&quot;) , 78);</span><br><span class="line"></span><br><span class="line">        //下面两行代码只会向IdentityHashMap对象中添加一个key-value对</span><br><span class="line">        ihm.put(&quot;java&quot; , 93);</span><br><span class="line">        ihm.put(&quot;java&quot; , 98);</span><br><span class="line">        System.out.println(ihm);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>*EnumMap*</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">enum Season</span><br><span class="line">&#123;</span><br><span class="line">    SPRING,SUMMER,FALL,WINTER</span><br><span class="line">&#125;</span><br><span class="line">public class EnumMapTest</span><br><span class="line">&#123;</span><br><span class="line">    public static void main(String[] args) </span><br><span class="line">    &#123;</span><br><span class="line">        //创建一个EnumMap对象，该EnumMap的所有key</span><br><span class="line">        //必须是Season枚举类的枚举值</span><br><span class="line">        EnumMap enumMap = new EnumMap(Season.class);</span><br><span class="line">        enumMap.put(Season.SUMMER , &quot;夏日炎炎&quot;);</span><br><span class="line">        enumMap.put(Season.SPRING , &quot;春暖花开&quot;);</span><br><span class="line">        System.out.println(enumMap);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>与创建普通Map有所区别的是，创建EnumMap是必须指定一个枚举类，从而将该EnumMap和指定枚举类关联起来</p>
<p>以上就是Map集合类的编程应用场景。我们来梳理一下思路</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1) HashMap和Hashtable的效率大致相同，因为它们的实现机制几乎完全一样。但HashMap通常比Hashtable要快一点，因为Hashtable需要额外的线程同步控制</span><br><span class="line">2) TreeMap通常比HashMap、Hashtable要慢(尤其是在插入、删除key-value对时更慢)，因为TreeMap底层采用红黑树来管理key-value对</span><br><span class="line">3) 使用TreeMap的一个好处就是： TreeMap中的key-value对总是处于有序状态，无须专门进行排序操作</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hujao.com/2017/05/05/ubuntu-nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ace1981">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ace'pages">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/05/ubuntu-nginx/" itemprop="url">ubuntu编译安装nginx</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-05T08:37:15+08:00">
                2017-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/负载均衡/" itemprop="url" rel="index">
                    <span itemprop="name">负载均衡</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一 下载Nginx最新稳定版本</p>
<p>可以从这里<a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">http://nginx.org/en/download.html</a> 下载最新版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://nginx.org/download/nginx-1.12.0.tar.gz</span><br></pre></td></tr></table></figure>
<p>二 安装插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install libpcre3 libpcre3-dev</span><br></pre></td></tr></table></figure>
<p>支持https</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install libssl-dev</span><br><span class="line"></span><br><span class="line">apt-get install openssl</span><br></pre></td></tr></table></figure>
<p>生成证书参考文档：</p>
<p><a href="http://wiki.nginx.org/NginxHttpSslModule" target="_blank" rel="noopener">http://wiki.nginx.org/NginxHttpSslModule</a></p>
<p>支持image filter </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install libgd2-xpm-dev</span><br></pre></td></tr></table></figure>
<p>三 编译安装</p>
<p>创建工作目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir nginx</span><br></pre></td></tr></table></figure>
<p>解压</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-1.12.0.tar.gz</span><br><span class="line">cd nginx-1.12.0</span><br></pre></td></tr></table></figure>
<p>配置安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/home/ace/nginx --with-http_ssl_module --with-http_image_filter_module</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<p>到/home/ace/nginx目录下，执行sudo ./nginx，可以启动nginx了</p>
<p>四 常用命令启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./nginx</span><br></pre></td></tr></table></figure>
<p>强制立即停止,不保存当前任务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./nginx -s stop</span><br></pre></td></tr></table></figure>
<p>不接受新的请求,处理当前的任务后停止</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./nginx -s quit</span><br></pre></td></tr></table></figure>
<p>重启 加载配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./nginx -s reload</span><br></pre></td></tr></table></figure>
<p>五 常用配置</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 工作线程数</span></span><br><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span> </span><br><span class="line">events&#123;</span><br><span class="line"><span class="comment"># 每个工作线程的最大连接数</span></span><br><span class="line"><span class="attribute">worker_connections</span> <span class="number">1024</span> </span><br><span class="line">&#125;</span><br><span class="line">http&#123;</span><br><span class="line">  <span class="attribute">include</span> mime.types;</span><br><span class="line">  <span class="attribute">default_type</span> application/octet-stream;</span><br><span class="line">  <span class="attribute">sendfile</span> <span class="literal">on</span>;</span><br><span class="line">  <span class="attribute">keepalive_timeout</span> <span class="number">65</span>;</span><br><span class="line">  server&#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> localhost;</span><br><span class="line">    <span class="comment"># 匹配 /</span></span><br><span class="line">    <span class="attribute">localtion</span> / &#123;</span><br><span class="line">      <span class="comment">#root为nginx安装目录下的 html文件夹</span></span><br><span class="line">      <span class="attribute">root</span> html;</span><br><span class="line">      <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 匹配 /50x.html</span></span><br><span class="line">    <span class="attribute">error_page</span> <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span> /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html&#123;</span><br><span class="line">      <span class="attribute">root</span> html;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Tip:关于代理的理解</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">正向代理与反向代理的区别</span><br><span class="line">正向代理: 客户端—&gt;vpn代理—&gt;Google</span><br><span class="line">反向代理: 客户端—&gt;baidu.com服务—&gt; server1,server2,…..serverN</span><br><span class="line">正向:消费者知道谁是服务者,找第三方转发请求</span><br><span class="line">反向:消费者不知道谁是最终的服务者,提交请求给入口门面,入口根据负载均衡规则去找具体的服务者</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hujao.com/2017/05/04/java-optimizing-8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ace1981">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ace'pages">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/04/java-optimizing-8/" itemprop="url">java性能优化学习(八)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-04T00:04:35+08:00">
                2017-05-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/性能优化/" itemprop="url" rel="index">
                    <span itemprop="name">性能优化</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="其他优化建议"><a href="#其他优化建议" class="headerlink" title="其他优化建议"></a>其他优化建议</h4><p>Java现有机制与未来发展</p>
<ul>
<li>Java体系结构变化历史</li>
<li>Java语言面临的挑战</li>
<li>Java8特性</li>
<li>Java语言前景</li>
<li>物联网</li>
<li>Java模块化发展</li>
<li>OpenJDK发展</li>
</ul>
<p>系统架构优化建议</p>
<ul>
<li>系统架构调优<ul>
<li>常用术语<ul>
<li>响应时间</li>
<li>可扩展性</li>
<li>垂直扩展</li>
<li>水平扩展</li>
<li>关系型数据库</li>
<li>NOSQL</li>
<li>垂直拆分</li>
<li>水平拆分</li>
</ul>
</li>
<li>系统扩展方式</li>
</ul>
</li>
<li>Java项目优化方式分享<ul>
<li>一般性软件项目优化案例<ul>
<li>针对日志的优化</li>
<li>针对数据库连接的优化</li>
<li>针对数据库插入数据的优化</li>
<li>针对多线程的优化</li>
<li>针对设计模式的优化</li>
</ul>
</li>
<li>订单系统的优化方案</li>
</ul>
</li>
<li>面向服务架构<ul>
<li>SOA</li>
<li>微服务架构</li>
</ul>
</li>
<li>程序隔离技术</li>
<li>团队并行开发准则</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hujao.com/2017/05/04/java-optimizing-7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ace1981">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ace'pages">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/04/java-optimizing-7/" itemprop="url">java性能优化学习(七)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-04T00:04:27+08:00">
                2017-05-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/性能优化/" itemprop="url" rel="index">
                    <span itemprop="name">性能优化</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="JVM性能调优建议"><a href="#JVM性能调优建议" class="headerlink" title="JVM性能调优建议"></a>JVM性能调优建议</h4><p>JVM相关概念</p>
<ul>
<li>内存使用<ul>
<li>内存分配的意义</li>
<li>线程共享内存区<ul>
<li>java堆区</li>
<li>方法区</li>
<li>运行时常量</li>
</ul>
</li>
<li>线程私有内存区<ul>
<li>PC寄存器</li>
<li>Java栈</li>
<li>本地方法栈</li>
</ul>
</li>
</ul>
</li>
<li>字节码相关<ul>
<li>字节码组织结构</li>
<li>javac编译器</li>
<li>编译原理</li>
<li>符号引用</li>
<li>常量池</li>
<li>字段表</li>
<li>方法表</li>
<li>属性表</li>
</ul>
</li>
<li>自动内存管理<ul>
<li>内存分配原理</li>
<li>逃逸分析和栈上分配</li>
<li>对象内存布局与OOP-Klass模型</li>
</ul>
</li>
</ul>
<p>JVM系统架构</p>
<ul>
<li>JVM的基本架构</li>
<li>JVM初始化过程</li>
<li>JVM架构模型和执行引擎</li>
<li>解释器与JIT编译器</li>
<li>类加载机制<ul>
<li>双亲委托模式</li>
<li>类加载阶段</li>
</ul>
</li>
<li>虚拟机<ul>
<li>32位 vs 64位</li>
<li>JVM容错事例</li>
</ul>
</li>
</ul>
<p>垃圾回收机制相关</p>
<ul>
<li><p>GC相关概念</p>
<ul>
<li><p>GC的作用评价GC策略的指标</p>
</li>
<li><p>指针碰撞(bump the pointer)和空闲列表(Free List)</p>
</li>
<li><p>年轻代和老年代</p>
</li>
<li><p>Full GC和Minor GC</p>
<p>除System.gc 触发Full GC的四种情况</p>
<p>1 旧生代空间不足</p>
<p>2 Permeant Generation空间满</p>
<p>3 CMS GC时出现promotion failed和concurrent mode failure</p>
<p>4 统计得到的Minor GC 晋升到旧生代的平均大小大于旧生代的剩余空间</p>
</li>
<li><p>Stop the world 案例</p>
</li>
</ul>
</li>
<li><p>垃圾回收算法</p>
<ul>
<li>引用计数法</li>
<li>根搜索算法</li>
<li>标记–清除算法</li>
<li>复制算法</li>
<li>标记–压缩算法</li>
<li>增量算法</li>
<li>分代收集算法</li>
</ul>
</li>
<li><p>垃圾搜集器</p>
<ul>
<li>垃圾搜集器分类</li>
<li>串行回收器和并行回收器</li>
<li>Serial收集器<ul>
<li>年轻代串行收集器</li>
<li>年老带串行收集器</li>
</ul>
</li>
<li>Parnew收集器</li>
<li>Parallel收集器<ul>
<li>年轻代并行收集器</li>
<li>年老代并行收集器</li>
</ul>
</li>
<li>CMS收集器</li>
<li>G1收集器</li>
<li>收集器对系统性能的影响</li>
</ul>
</li>
</ul>
<p>实用JVM实验</p>
<ul>
<li>将新对象预留在年轻代</li>
<li>大对象进入老年代</li>
<li>设置对象进入年老代的年龄</li>
<li>稳定与震荡的堆大小</li>
<li>吞吐量优先案例</li>
<li>使用大页案例</li>
<li>降低停顿案例</li>
<li>设置最大堆内存</li>
<li>设置最小堆内存</li>
<li>设置年轻代</li>
<li>设置持久代</li>
<li>设置线程栈</li>
<li>堆的比例分配</li>
<li>堆分配参数总结</li>
<li>垃圾回收相关参数总结<ul>
<li>串行回收器参数</li>
<li>并行GC参数</li>
<li>CMS回收器参数</li>
<li>G1回收器参数</li>
<li>JIT编译参数</li>
<li>堆快照</li>
</ul>
</li>
<li>查询GC命令</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hujao.com/2017/05/04/java-optimizing-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ace1981">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ace'pages">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/04/java-optimizing-6/" itemprop="url">java性能优化学习(六)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-04T00:04:20+08:00">
                2017-05-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/性能优化/" itemprop="url" rel="index">
                    <span itemprop="name">性能优化</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="JVM性能测试及监控"><a href="#JVM性能测试及监控" class="headerlink" title="JVM性能测试及监控"></a>JVM性能测试及监控</h4><p>监控计算机设备层</p>
<ul>
<li>监控CPU<ul>
<li>CPU监控工具-windows<ul>
<li>任务管理器</li>
<li>性能监视器(Permon)</li>
<li>Typeperf</li>
</ul>
</li>
<li>CPU监控工具-linux<ul>
<li>GNOME System Monitor</li>
<li>top命令</li>
<li>vmstat命令</li>
<li>sar工具</li>
<li>mpstat命令</li>
<li>pidstat命令</li>
<li>jstack</li>
</ul>
</li>
</ul>
</li>
<li>监控内存<ul>
<li>内存监控工具-windows<ul>
<li>permon</li>
</ul>
</li>
<li>内存监控工具-linux<ul>
<li>free命令</li>
<li>/proc/meminfo</li>
<li>jmap命令</li>
<li>atop命令</li>
<li>vmstat命令</li>
<li>sar工具</li>
</ul>
</li>
</ul>
</li>
<li>监控磁盘<ul>
<li>磁盘监控工具-windows<ul>
<li>Permon</li>
</ul>
</li>
<li>磁盘监控工具-linux<ul>
<li>iostat命令</li>
<li>df命令</li>
<li>vmstat命令</li>
<li>sar工具</li>
</ul>
</li>
</ul>
</li>
<li>监控网络<ul>
<li>网络使用率监控工具-windows</li>
<li>网络使用率监控工具-linux<ul>
<li>netstat命令</li>
<li>ifstat命令</li>
<li>iftop工具</li>
<li>nload工具</li>
</ul>
</li>
</ul>
</li>
<li>监控JVM<ul>
<li>监控垃圾收集目的</li>
<li>GC垃圾收集报告分析</li>
<li>图形化工具<ul>
<li>GCHisto</li>
<li>JConsole</li>
<li>VisualVM</li>
</ul>
</li>
<li>GC跟踪</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hujao.com/2017/05/04/java-optimizing-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ace1981">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ace'pages">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/04/java-optimizing-5/" itemprop="url">java性能优化学习(五)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-04T00:04:14+08:00">
                2017-05-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/性能优化/" itemprop="url" rel="index">
                    <span itemprop="name">性能优化</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>并行程序优化</p>
<ul>
<li>资源限制的挑战</li>
<li>进程,线程,协程</li>
<li>使用多线程的原因</li>
<li>线程不安全范例</li>
<li>重排序机制</li>
<li>实例变量的数据共享</li>
<li>生产消费者模式</li>
<li>线程池的使用</li>
</ul>
<p>锁机制对比</p>
<ul>
<li>锁机制概述</li>
<li>Synchronize使用技巧</li>
<li>Volatile的使用技巧</li>
<li>队列同步器</li>
<li>可重入锁</li>
<li>读写锁</li>
<li>偏向锁和轻量级锁</li>
</ul>
<p>增加程序并行性</p>
<ul>
<li>并发计数器</li>
<li>减少上下文切换次数</li>
<li>针对Thread类的更新</li>
<li>Fork/Join框架</li>
<li>Executor框架</li>
</ul>
<p>JDK类库的使用</p>
<ul>
<li>原子值</li>
<li>并行容器<ul>
<li>ConcurrentHashMap</li>
<li>CopyOnWriteArrayList</li>
</ul>
</li>
<li>非阻塞队列<ul>
<li>非阻塞算法</li>
<li>ConcurrentLinkedQueue</li>
</ul>
</li>
<li>阻塞队列<ul>
<li>ArrayBlockingQueue</li>
<li>LinkedBlockingQueue</li>
<li>DelayQueue</li>
<li>PriorityBlockingQueue</li>
<li>SynchronousQueue</li>
<li>LinkedTransferQueue</li>
<li>LinkedBlockingDeque</li>
</ul>
</li>
<li>并发工具类<ul>
<li>CountDownLatch工具类</li>
<li>CyclicBarrier工具类</li>
<li>Semaphore工具类</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">ace1981</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">128</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index/index.html">
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">63</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ace1981</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
