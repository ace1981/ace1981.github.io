<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>telegraf学习 | Ace'pages</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">telegraf学习</h1><a id="logo" href="/.">Ace'pages</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">telegraf学习</h1><div class="post-meta">Dec 18, 2017<span> | </span><span class="category"><a href="/categories/服务监控/">服务监控</a></span></div><div class="post-content"><p>学习资料:</p>
<p><a href="http://www.cnblogs.com/Scissors/p/5977670.html" target="_blank" rel="external">grafana + influxdb + telegraf , 构建性能监控平台</a></p>
<p><a href="https://my.oschina.net/xxbAndy/blog/751330" target="_blank" rel="external">Docker监控方案(TIG)的研究与实践之Telegraf</a></p>
<p>摘要: Docker监控方案之容器内部指标采集工具Telegraf的介绍和安装。Telegraf用纯go编写，通过插件化方式进行采集各种服务(system，docker，redis，nginx，kafka等)监控指标并且上报给相应的中间件，比如influxdb，opentsdb(商城docker监控使用这个)。Telegraf也是整个TICK(telegraf+influxdb+chronograf+kapacitor)生态栈的第一块组件也是最重要的组件。</p>
<h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>Docker由于使用了基于namespace和cgroup的技术，因此监控docker容器和监控宿主机在某些性能指标和方式上有一些区别，而传统的监控方式可能无法满足docker容器内部的指标监控，本篇系列文章主要分享使用telegraf+influxdb+grafana去监控docker容器内部资源使用情况。目前主要关注的监控指标为：每个宿主机上的docker容器数量，每个docker容器的内存使用情况，CPU使用情况，网络使用情况以及磁盘使用情况。同时这套方案也能够监控到宿主机的一些基本资源使用情况。</p>
<h4 id="Telegraf简介与实践"><a href="#Telegraf简介与实践" class="headerlink" title="Telegraf简介与实践"></a>Telegraf简介与实践</h4><p>简介：</p>
<p>由influxdata公司开发的用于采集系统数据的服务，用纯go编写，通过插件化方式进行采集各种服务(system，docker，redis，nginx，kafka等)监控指标并且上报给相应的中间件，比如influxdb，opentsdb(商城docker监控使用这个)。Telegraf也是整个TICK(telegraf+influxdb+chronograf+kapacitor)生态栈的第一块组件也是最重要的组件。</p>
<p>特点：</p>
<p>纯go编写，不需要依赖其他组件；消耗相关系统资源比较小；plugins支持多种输入输出插件(采集和上报)；<br><code>相关连接：</code></p>
<blockquote>
<p>github：<a href="https://github.com/influxdata/telegraf" target="_blank" rel="external">https://github.com/influxdata/telegraf</a><br>官网文档：<a href="https://docs.influxdata.com/telegraf/v1.0/" target="_blank" rel="external">https://docs.influxdata.com/telegraf/v1.0/</a><br>TICK生态栈:<a href="https://www.influxdata.com/downloads/#telegraf" target="_blank" rel="external">https://www.influxdata.com/downloads/#telegraf</a></p>
</blockquote>
<p>安装：</p>
<p><code>所有的安装以及部署都是在linux下的，所以不知道linux下安装基础软件包的，请自觉绕路！</code><br>Centos系列可以配置yum源或者直接下载包，并安装。个人建议直接下载包，由于不需要其他系统依赖，可以直接在集群环境进行共享。<br>wget<a href="https://dl.influxdata.com/telegraf/releases/telegraf-1.0.0.x86_64.rpm" target="_blank" rel="external">https://dl.influxdata.com/telegraf/releases/telegraf-1.0.0.x86_64.rpm</a> &amp;&amp; rpm -ivh telegraf-1.0.0.x86_64.rpm<br><code>其他环境安装指南:</code></p>
<blockquote>
<p>Ubuntu &amp;&amp; Debin：<br>ubuntu repo：<br>curl -sL<a href="https://repos.influxdata.com/influxdb.key" target="_blank" rel="external">https://repos.influxdata.com/influxdb.key</a> | sudo apt-key add -<br>source /etc/lsb-release<br>echo “deb <a href="https://repos.influxdata.com/%3Cspan%20class=&#39;mathjax-replacement&#39;%20rel=&#39;227521499c481b5de95e53b2237f2e80&#39;%3E$%7BDISTRIB_ID,,%7D%20$%3C/span%3E" target="_blank" rel="external">https://repos.influxdata.com/</a>{DISTRIB_CODENAME} stable” | sudo tee /etc/apt/sources.list.d/influxdb.list<br>Debin repo：<br>curl -sL<a href="https://repos.influxdata.com/influxdb.key" target="_blank" rel="external">https://repos.influxdata.com/influxdb.key</a> | sudo apt-key add -<br>source /etc/os-release<br>test $VERSION_ID = “7” &amp;&amp; echo “deb<a href="https://repos.influxdata.com/debian" target="_blank" rel="external">https://repos.influxdata.com/debian</a>wheezy stable” | sudo tee /etc/apt/sources.list.d/influxdb.list<br>test $VERSION_ID = “8” &amp;&amp; echo “deb<a href="https://repos.influxdata.com/debian" target="_blank" rel="external">https://repos.influxdata.com/debian</a> jessie stable” | sudo tee /etc/apt/sources.list.d/influxdb.list<br>配置完ubuntu系列的repo之后，就可以执行sudo apt-get update &amp;&amp; sudo apt-get install telegraf进行安装了<br>直接下载deb包方式：<br>wget<a href="https://dl.influxdata.com/telegraf/releases/telegraf_1.0.0_amd64.deb" target="_blank" rel="external">https://dl.influxdata.com/telegraf/releases/telegraf_1.0.0_amd64.deb</a>&amp;&amp; sudo dpkg -i telegraf_1.0.0_amd64.deb</p>
</blockquote>
<p>启动：</p>
<p>telegraf可以支持多种服务管理方式，安装之后默认可用使用service和systemd进行管理，因此在centos6-7中都可以使用系统自带的服务管理进行维护(init.d和systemctl)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/telegraf start 或者systemctl restart telegraf</div></pre></td></tr></table></figure>
<p>配置：</p>
<p>配置可以说是telegraf运用中最核心的一个环节，因为配置的细节决定你采集数据的指标。telegraf的配置可以说是比较千变万化，因为可以支持多种输出、输入组件，并且每种组件的配置支持不通的过滤规则，能够让配置管理和维护者正确的采集自己需要的信息。<br>默认配置文件存放路径：/etc/telegraf/telegraf.conf ，额外配置路径/etc/telegraf/telegraf.d/。<br>在生产环境中建议自定生成配置并存放在/etc/telegraf/telegraf.d/中。<br>自定义生成配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#telegraf -sample-config &gt; telegraf.conf 这样生成的配置文件将包含每一个插件，但是大部分会被注释掉，可以根据实际的业务场景进行定义</div></pre></td></tr></table></figure>
<p>配置文件示例以及详细讲解：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div></pre></td><td class="code"><pre><div class="line">#cat telegraf.conf</div><div class="line">########################################全局配置############################################################</div><div class="line">#全局tag配置，采用key = &quot;values&quot;方式，这样在本机采集到的所有数据将都有这个标签</div><div class="line">[global_tags]</div><div class="line">dc = &quot;docker-test&quot;</div><div class="line">#agent配置</div><div class="line">[agent]</div><div class="line">#默认的数据(input)采集间隔时间</div><div class="line">interval = &quot;10s&quot;</div><div class="line">#采用轮询时间间隔。默认是使用interval里面的值进行轮询，比如interval = &quot;10s&quot;,那采集时间将是:00, :10, :20, 等</div><div class="line">round_interval = true</div><div class="line">#每次发送到output的度量大小不能超过metric_batch_size的值</div><div class="line">metric_batch_size = 1000</div><div class="line">#telegraf会为每一个output去缓存一份度量值，metric_buffer_limit为缓存的限制，并且刷新buffer以确定成功写入。如果达到这个限制了，老的数据会被第一时间丢弃</div><div class="line">#当然了，增加这个值能够容忍更多的数据连接，但是这也将会增加telegraf潜在的内存占用。这个值可以大于metric_batch_size但是必须小于它的两倍</div><div class="line">metric_buffer_limit = 10000</div><div class="line">#通过随机度量来对采集时间进行抖动。每个插件在采集数据之前将会有一个随机时间的休眠，但是这个时间应小于collection_jitter</div><div class="line">#这个设置是为了防止多个采集源数据同一时间都在队列</div><div class="line">collection_jitter = &quot;0s&quot;</div><div class="line">#默认所有数据flush到outputs的时间(在数据被flush到output之前，最大能到flush_interval + flush_jitter)。不能低于interval</div><div class="line">flush_interval = &quot;10s&quot;</div><div class="line"># 通过随机数来对flush间隔进行抖动。这个主要是为了避免当运行一个大的telegraf实例的时候有比较大的写入。(jitter=5s,flush_interval=10s意味着每10-15s会发生一次flush操作)</div><div class="line">flush_jitter = &quot;0s&quot;</div><div class="line">#默认这个值被设置相同的时间戳通过采集间隔排序。最大值为1s。这个指标一般不会用在service input(比如logparser和statsd)。单位(ns,us,ms,s)</div><div class="line">precision = &quot;&quot;</div><div class="line">#以debug模式运行</div><div class="line">debug = false</div><div class="line">#以安静模式运行</div><div class="line">quiet = false</div><div class="line">#这个将会覆盖默认的hostname，如果为空的话，将会采用os.Hostname()</div><div class="line">hostname = &quot;&quot;</div><div class="line">#如果设置为true，就不允许在telegraf agent里面设置&quot;host&quot;标签了 </div><div class="line">omit_hostname = false</div><div class="line">##############################################度量值过滤#######################################################</div><div class="line">#过滤可以被配置在每一个输入和输出值</div><div class="line">namepass：一个数组字符串可以被用来过滤由当前input生成的度量值，在数组中的每一个字符串和全局匹配到的测量值名字进行对比，如果匹配了，值被采用</div><div class="line">namedrop:pass的反向含义，如果匹配，则不使用</div><div class="line">fieldpass：在namepass满足的条件下，output的fieldpass不可用</div><div class="line">fielddrop：pass的反向含义，如果field名字匹配，将不被采用。output的fielddrop不可用</div><div class="line">tagpass：tag names和数组中的字符串都被用来过滤当前input的值，数组中的每一个每一个字符串和tag name对比，匹配则则采用</div><div class="line">tagdrop:tagpass的反向含义，如果tag匹配，该度量值不被采用</div><div class="line">tagexclude:被用来从度量值(measurements)中执行一个tag。作为tagdrop的对立面，它将丢弃所有依赖于tag的相关度量值，tagexclude只是单纯的从度量值中给tag一个key</div><div class="line">这个可以被用作input和output中，但是强烈建议用在input中，他会在同一个采集时间点更加有效的过滤out tags</div><div class="line">taginclude:tagexclude的反向含义。在最终的度量值中，也将包含tag keys</div><div class="line">注意：tagpass和tagdrop参数必须等一在plugin函数的底部，不然对应的子plugin配置可能被tagpass/tagdrop映射中的内容截断</div><div class="line">#################################################(OUTPUT)输出配置##############################################</div><div class="line">#输出插件，我们使用的是influxdb，得先进行安装配置</div><div class="line">[[outputs.influxdb]]</div><div class="line">## The full HTTP or UDP endpoint URL for your InfluxDB instance.</div><div class="line">#如果有多个urls，可以指定为相同集群的一部分。意味着urls中的一个将被写到每一个间隔</div><div class="line"># urls = [&quot;udp://localhost:8089&quot;] # UDP endpoint example</div><div class="line">urls = [&quot;http://172.25.46.7:8086&quot;] # required</div><div class="line">#默认需要连接的telegraf库，没有则自己创建</div><div class="line">database = &quot;telegraf&quot; # required</div><div class="line">precision = &quot;s&quot;</div><div class="line">#修改保留策略</div><div class="line">retention_policy = &quot;&quot;</div><div class="line">#持续写入，仅支持集群模式, can be: &quot;any&quot;, &quot;one&quot;, &quot;quorum&quot;, &quot;all&quot;</div><div class="line">write_consistency = &quot;any&quot;</div><div class="line">#作为influxdb客户端，设置写超时时间，如果为空默认为5s超时，0s表示不设置超时时间(不建议)</div><div class="line">timeout = &quot;5s&quot;</div><div class="line">#设置telegraf的库的用户名和密码</div><div class="line"># username = &quot;telegraf&quot;</div><div class="line"># password = &quot;metricsmetricsmetricsmetrics&quot;</div><div class="line">###############################################(INPUT)输入配置###################################################</div><div class="line">inputs插件全局参数:</div><div class="line">#每一个input都可以配置的全局配置项</div><div class="line">#name_override:覆盖默认的度量值名字(默认是input的名字)</div><div class="line">#name_prefix:指定一个前缀并附加到度量值的名字(measuerments name)</div><div class="line">#name_suffix:指定后缀</div><div class="line">#tags：一个标签映射到指定的input度量值</div><div class="line">#interval：多久采集一次数据，默认可用使用全局配置中的参数</div><div class="line">配置示例：</div><div class="line">[[inputs.cpu]]</div><div class="line">#采集每个cpu的指标</div><div class="line">percpu = true</div><div class="line">#采集总的cpu指标</div><div class="line">totalcpu = true</div><div class="line">#会丢弃掉time开头的。如果想要采集原始的cpu相关指标，请注释</div><div class="line">fielddrop = [&quot;time_*&quot;]</div><div class="line">[[inputs.disk]]</div><div class="line">#默认的telegraf将手机所有挂载点的信息</div><div class="line">#下面这个参数可以指定挂载点</div><div class="line">mount_points = [&quot;/&quot;]</div><div class="line">#仅存储磁盘inode相关的度量值</div><div class="line">fieldpass = [&quot;inodes*&quot;]</div><div class="line">#通过文件系统类型来忽略一些挂载点，比如tmpfs</div><div class="line">ignore_fs = [&quot;tmpfs&quot;, &quot;devtmpfs&quot;]</div><div class="line">#仅存储tagpass相关的信息</div><div class="line">[inputs.disk.tagpass]</div><div class="line">fstype = [ &quot;ext4&quot;, &quot;xfs&quot; ]</div><div class="line">path = [ &quot;/export&quot;, &quot;/home*&quot; ]</div><div class="line">#默认telegraf将采集所有存储设备的信息，devices参数可以指定</div><div class="line"># devices = [&quot;sda&quot;, &quot;sdb&quot;]</div><div class="line">#如果需要磁盘的串行号可以将下面注释打开</div><div class="line"># skip_serial_number = false</div><div class="line">[[inputs.mem]]</div><div class="line">#采集docker和redis的插件</div><div class="line">[[inputs.docker]]</div><div class="line">#指定docker启动的api接口，并指定需要采集那些容器指标</div><div class="line">endpoint = &quot;tcp://10.0.0.2:5256&quot;</div><div class="line">container_names = []</div><div class="line">[[inputs.redis]]</div><div class="line">#指定redis的相关接口</div><div class="line">servers = [&quot;tcp://10.0.0.1:6379&quot;]</div></pre></td></tr></table></figure>
<p>测试插件是否正常工作：</p>
<p><code>使用以下命令会将telegraf采集的数据默认输出到终端，依次来检验配置的监控项是否是自己所期望的指标。</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#telegraf -config /etc/telegraf/telegraf.conf -input-filter docker -test           会输出docker相关的监控信息说明配置正确(当然也可以去测试其他inputs plugins)</div></pre></td></tr></table></figure>
<p><strong>注意：上面的配置文件中使用的output plugins是influxdb，因此在没有成功配置influxdb的前提下，此配置文件是不能正常让telegraf正常启动的！下一节将会讲到influxdb的相关知识influxdb相关：</strong></p>
<p>重启服务：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">centos6.x:</div><div class="line">#/etc/init.d/telegraf restart （service telegraf restart ）</div><div class="line">centos7.x:</div><div class="line">#systemctl restart telegraf</div></pre></td></tr></table></figure>
<p>此时，可以查看相关日志，确保telegraf正常启动，启动之后去influxdb就可以查询相关采集到的数据。</p>
<p>附：</p>
<p>telegraf常用的input plugins:</p>
<p>收集docker相关的信息：<a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/docker" target="_blank" rel="external">https://github.com/influxdata/telegraf/tree/master/plugins/inputs/docker</a>主要是通过docker API调用相关监控<br>收集相关redis的信息：<a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/redis" target="_blank" rel="external">https://github.com/influxdata/telegraf/tree/master/plugins/inputs/redis</a><br>收集相关mesos的信息：<a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/mesos" target="_blank" rel="external">https://github.com/influxdata/telegraf/tree/master/plugins/inputs/mesos</a><br>收集相关nginx的信息：<a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/nginx" target="_blank" rel="external">https://github.com/influxdata/telegraf/tree/master/plugins/inputs/nginx</a><br>收集相关mysql的信息：<a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/mysql" target="_blank" rel="external">https://github.com/influxdata/telegraf/tree/master/plugins/inputs/mysql</a><br>收集ping相关信息：<a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/ping" target="_blank" rel="external">https://github.com/influxdata/telegraf/tree/master/plugins/inputs/ping</a><br>收集influxdb相关信息：<a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/influxdb" target="_blank" rel="external">https://github.com/influxdata/telegraf/tree/master/plugins/inputs/influxdb</a><br>收集系统相关的信息：<a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/system" target="_blank" rel="external">https://github.com/influxdata/telegraf/tree/master/plugins/inputs/system</a><br>收集haproxy相关信息：<a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/haproxy" target="_blank" rel="external">https://github.com/influxdata/telegraf/tree/master/plugins/inputs/haproxy</a><br>收集cgroup相关信息：<a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/cgroup" target="_blank" rel="external">https://github.com/influxdata/telegraf/tree/master/plugins/inputs/cgroup</a></p>
<p>核心plugins 监控指标的采集原理(system，docker)</p>
<ul>
<li><p><strong>system plugin：</strong>主要监控项包含CPU,DISK,KERNEL,KERNEL_VMSTAT,NETSTAT,PROCESS,SYSTEM</p>
<blockquote>
<p>CPU中有两个参数，分别为totalcpu和percpu，如果为true经分别采集相关cpu的指标。主要指标有：user，nice，system，idle，iowait，cpu_usage等<br>DISK：主要指标有free，total；used(单位字节);uesd_percent;inode_free;inode_total;inode_used.需要注意的是，used_percent指标通过使用used/(used+free)计算得出。<br>MEM：主要指标total;available(/proc/meminfo原生值)；available_percent(available / total <em> 100)；used_percent(used / total </em> 100)<br>NET：通过lsof采集tcp连接状态和udp相关信息。指标：established syn_sent syn_recv fin_wait1 time_wait close listen closing<br>PROCESS：收集进程总数个状态组（zombie,sleeping,running),也是通过采集/proc中的数据<br>SYSTEM：系统负载,load1;load15;load5</p>
</blockquote>
</li>
<li><p><strong>docker plugin:</strong>主要监控项包括ocker_container_mem,docker_container_cpu,docker_container_net,docker_container<em>nlkio,docker</em>,docker_data,docker_metadata。基本上是通过docker api进行采集docker容器相关的监控指标的（<a href="https://docs.docker.com/engine/reference/api/docker_remote_api_v1.25/#/inspect-a-container" target="_blank" rel="external">https://docs.docker.com/engine/reference/api/docker_remote_api_v1.25/#/inspect-a-container</a>）<br>具体的监控项可以在源码中进行查看：(<a href="https://github.com/influxdata/telegraf/blob/master/plugins/inputs/docker/docker.go" target="_blank" rel="external">https://github.com/influxdata/telegraf/blob/master/plugins/inputs/docker/docker.go</a>)</p>
</li>
<li><p><strong>几个主要关心的指标:</strong></p>
</li>
</ul>
<p>docker_memory:</p>
<p><img src="https://static.oschina.net/uploads/space/2016/0925/122906_pb4D_1026229.png" alt="img"><br>docker_cpu:</p>
<p><img src="https://static.oschina.net/uploads/space/2016/0925/122920_RJRx_1026229.png" alt="img"><br>docker_net:</p>
<p><img src="https://static.oschina.net/uploads/space/2016/0925/122937_818H_1026229.png" alt="img"><br>docker相关:</p>
<p><img src="https://static.oschina.net/uploads/space/2016/0925/122950_D88m_1026229.png" alt="img"></p>
</div><div class="tags"><a href="/tags/metrics/">metrics</a><a href="/tags/influxdb/">influxdb</a><a href="/tags/telegraf/">telegraf</a></div><div class="post-nav"><a class="pre" href="/2017/12/20/bat/">编写.bat文件</a><a class="next" href="/2017/12/18/docker-resource/">docker资源控制</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://hujao.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/docker/shell/">shell</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/etl/">etl</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springboot/">springboot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web前端/">web前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码管理/">代码管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式/">分布式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/">大数据</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/容器编排/">容器编排</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/开发工具/">开发工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/性能优化/">性能优化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/持续集成/">持续集成</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/搜索引擎/">搜索引擎</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据安全/">数据安全</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/日志收集/">日志收集</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务监控/">服务监控</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/">机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/框架/">框架</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/流计算/">流计算</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/消息队列/">消息队列</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/第三方支付/">第三方支付</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络协议/">网络协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/负载均衡/">负载均衡</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/md5/" style="font-size: 15px;">md5</a> <a href="/tags/bat/" style="font-size: 15px;">bat</a> <a href="/tags/sercurity/" style="font-size: 15px;">sercurity</a> <a href="/tags/key/" style="font-size: 15px;">key</a> <a href="/tags/crt/" style="font-size: 15px;">crt</a> <a href="/tags/cer/" style="font-size: 15px;">cer</a> <a href="/tags/jks/" style="font-size: 15px;">jks</a> <a href="/tags/pfx/" style="font-size: 15px;">pfx</a> <a href="/tags/p12/" style="font-size: 15px;">p12</a> <a href="/tags/der/" style="font-size: 15px;">der</a> <a href="/tags/pem/" style="font-size: 15px;">pem</a> <a href="/tags/kdb/" style="font-size: 15px;">kdb</a> <a href="/tags/pub/" style="font-size: 15px;">pub</a> <a href="/tags/design/" style="font-size: 15px;">design</a> <a href="/tags/jms/" style="font-size: 15px;">jms</a> <a href="/tags/activemq/" style="font-size: 15px;">activemq</a> <a href="/tags/elasticsearch/" style="font-size: 15px;">elasticsearch</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/jenkins/" style="font-size: 15px;">jenkins</a> <a href="/tags/registry/" style="font-size: 15px;">registry</a> <a href="/tags/svn/" style="font-size: 15px;">svn</a> <a href="/tags/springboot-dubbo-dubbo-monitor/" style="font-size: 15px;">springboot dubbo dubbo-monitor</a> <a href="/tags/dubbo/" style="font-size: 15px;">dubbo</a> <a href="/tags/springboot/" style="font-size: 15px;">springboot</a> <a href="/tags/des/" style="font-size: 15px;">des</a> <a href="/tags/aes/" style="font-size: 15px;">aes</a> <a href="/tags/rsa/" style="font-size: 15px;">rsa</a> <a href="/tags/sha1/" style="font-size: 15px;">sha1</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/base64/" style="font-size: 15px;">base64</a> <a href="/tags/freemarker/" style="font-size: 15px;">freemarker</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/metrics/" style="font-size: 15px;">metrics</a> <a href="/tags/statsd/" style="font-size: 15px;">statsd</a> <a href="/tags/graphite/" style="font-size: 15px;">graphite</a> <a href="/tags/grafana/" style="font-size: 15px;">grafana</a> <a href="/tags/influxdb/" style="font-size: 15px;">influxdb</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/kafka/" style="font-size: 15px;">kafka</a> <a href="/tags/etl/" style="font-size: 15px;">etl</a> <a href="/tags/kubernetes/" style="font-size: 15px;">kubernetes</a> <a href="/tags/log/" style="font-size: 15px;">log</a> <a href="/tags/lombok/" style="font-size: 15px;">lombok</a> <a href="/tags/mybatis/" style="font-size: 15px;">mybatis</a> <a href="/tags/jpa/" style="font-size: 15px;">jpa</a> <a href="/tags/openssl/" style="font-size: 15px;">openssl</a> <a href="/tags/designpattern/" style="font-size: 15px;">designpattern</a> <a href="/tags/shiro/" style="font-size: 15px;">shiro</a> <a href="/tags/network/" style="font-size: 15px;">network</a> <a href="/tags/qos/" style="font-size: 15px;">qos</a> <a href="/tags/telegraf/" style="font-size: 15px;">telegraf</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/jdk8/" style="font-size: 15px;">jdk8</a> <a href="/tags/ubuntu/" style="font-size: 15px;">ubuntu</a> <a href="/tags/支付/" style="font-size: 15px;">支付</a> <a href="/tags/zookeeper/" style="font-size: 15px;">zookeeper</a> <a href="/tags/zkui/" style="font-size: 15px;">zkui</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/12/21/binbash/">为docker编写bash启动脚本</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/21/jenkins-for-docker/">jenkins+springboot+docker+git持续集成</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/20/qos/">qos基本原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/20/overlay-network/">overlay network</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/20/bat/">编写.bat文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/18/telegraf/">telegraf学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/18/docker-resource/">docker资源控制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/18/docker-base/">docker基础命令回顾</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/18/encryption-algorithm/">encryption-algorithm</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/18/openssl/">openssl常用命令</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">Ace'pages.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>