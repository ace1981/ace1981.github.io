<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  
  <title>activiti | Ace&#39;pages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="http://blog.csdn.net/bluejoe2000/article/details/39521405
用户手册
http://blog.csdn.net/anxpp/article/details/53912439
转载地址：http://www.ecmkit.com/zh-hans/2012/03/21/activiti-workflow-hell
\1. Activiti问我们提">
<meta property="og:type" content="article">
<meta property="og:title" content="activiti">
<meta property="og:url" content="http://hujao.com/2017/12/26/activiti/index.html">
<meta property="og:site_name" content="Ace'pages">
<meta property="og:description" content="http://blog.csdn.net/bluejoe2000/article/details/39521405
用户手册
http://blog.csdn.net/anxpp/article/details/53912439
转载地址：http://www.ecmkit.com/zh-hans/2012/03/21/activiti-workflow-hell
\1. Activiti问我们提">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image001.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image003.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image005.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image007.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image009.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image011.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image013.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image015.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image017.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image019.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image021.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image023.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image025.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image027.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image029.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image031.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image033.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image035.png">
<meta property="og:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image037.png">
<meta property="og:updated_time" content="2017-12-26T04:09:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="activiti">
<meta name="twitter:description" content="http://blog.csdn.net/bluejoe2000/article/details/39521405
用户手册
http://blog.csdn.net/anxpp/article/details/53912439
转载地址：http://www.ecmkit.com/zh-hans/2012/03/21/activiti-workflow-hell
\1. Activiti问我们提">
<meta name="twitter:image" content="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image001.png">
  
    <link rel="alternate" href="/atom.xml" title="Ace&#39;pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/typing.css">
</head>

  
    
      <body>
    
  
      <div id="container" class="container">
        <article id="post-activiti" class="article article-type-post" itemscope itemprop="blogPost">
  <header id="header" class="header">
  <nav id="main-nav" class="main-nav">
    
      <a class="main-nav-link" href="/">Home</a>
    
      <a class="main-nav-link" href="/archives">Archives</a>
    
      <a class="main-nav-link" href="/categories">Categories</a>
    
      <a class="main-nav-link" href="/tags">Tags</a>
    
      <a class="main-nav-link" href="/about">About</a>
    
  </nav>
  <nav id="sub-nav">
    
      <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
    
  </nav>
</header>

  <hr/>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      activiti
    </h1>
  

      </header>
    
    <div class="article-entry typo" itemprop="articleBody">
      
        <p><a href="http://blog.csdn.net/bluejoe2000/article/details/39521405" target="_blank" rel="external">http://blog.csdn.net/bluejoe2000/article/details/39521405</a></p>
<p><a href="http://www.mossle.com/docs/activiti/index.html" target="_blank" rel="external">用户手册</a></p>
<p><a href="http://blog.csdn.net/anxpp/article/details/53912439" target="_blank" rel="external">http://blog.csdn.net/anxpp/article/details/53912439</a></p>
<p>转载地址：<a href="http://www.ecmkit.com/zh-hans/2012/03/21/activiti-workflow-hell" target="_blank" rel="external">http://www.ecmkit.com/zh-hans/2012/03/21/activiti-workflow-hell</a></p>
<p>\1. Activiti问我们提供了Activiti BPMN 2.0, 这个工具是基于Eclipse所开发的工具，安装十分方便。在安装Activiti之前，我们要首先安装Maven Eclipse插件。</p>
<p>点击Help -&gt; Install New Software，输入以下站点信息：</p>
<p><strong>Name</strong>: M2E<br><strong>Location</strong>: <a href="http://download.eclipse.org/technology/m2e/releases" target="_blank" rel="external">http://download.eclipse.org/technology/m2e/releases</a></p>
<p>选中Maven进行安装。</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image001.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image001.png" alt="img"></a></p>
<p>\2. 下一步安装Activiti，点击Help -&gt; Install New Software，输入以下站点信息：</p>
<p><strong>Name</strong>: Activiti BPMN 2.0 designer<br><strong>Location</strong>: <a href="http://activiti.org/designer/update/" target="_blank" rel="external">http://activiti.org/designer/update/</a></p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image003.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image003.png" alt="img"></a></p>
<p>点击next，finish进行安装。</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image005.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image005.png" alt="img"></a></p>
<p>\3. 安装完成后，我们就可以建立Activiti项目了。点击New-&gt; Project… -&gt; Activiti -&gt; Activiti Project</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image007.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image007.png" alt="img"></a></p>
<p>输入项目的名称，点击Finish, 此时Eclipse会打开Activiti View，并生成如下项目：</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image009.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image009.png" alt="img"></a></p>
<p>\4. 现在我们开始创建工作流。右键点击项目根目录，选择new -&gt; others，选择Activiti -&gt; Activiti Diagram</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image011.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image011.png" alt="img"></a></p>
<p>接下来输入项目名称，这里我们输入HellowWorld.activiti(看到HelloWorld是不是倍感亲切啊:))</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image013.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image013.png" alt="img"></a></p>
<p>点击Finish，最后Eclipse会生成一个新的HelloWorld.activit文件，并用Activiti Designer打开这个新生成的文件。如下图所示：</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image015.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image015.png" alt="img"></a></p>
<p>我们可以看到，左上侧最大的区域为设计区，用来放置我们的工作流元素，右上侧为工具区，Activiti提供了很多out of box的工作流元素，可以供我们搭建工作流。下方区域为配置区，当点击工作流中的某一个元素时，相应的属性面板会显示该元素的可配置属性。</p>
<p>\5. 最后我们来搭建一个非常简单的工作流，仅有一个start event, 一个user task及一个end event。这里我不打算介绍太多BPMN 2.0，仅给大家一个基本的步骤。</p>
<p>如下图所示，拖动右侧红色框框所表示的1, 2, 3, 组成如下工作流</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image017.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image017.png" alt="img"></a></p>
<p>选择右侧最上方的”select”元素，再点击User Task元素，下方弹出属性面板。在属性面板上点击左侧的Main Config，然后Performer Type选择”Assignee”，Expression输入”kermit”。解释一下这个步骤的意思，这里我们配置该任务的执行者是某个用户，这个用户的名字是”kermit”。后面我们会用这个用户登录我们的测试环境。</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image019.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image019.png" alt="img"></a></p>
<p>点击保存，我们可以看到Activiti会自动生成该activit文件所对应的HelloWorld.bpmn20.xml文件，该文件内容如下：</p>
<p>&lt;?xml version=<em>“1.0”</em> encoding=<em>“UTF-8”</em>?&gt;</p>
<definitions 20100524="" xmlns="*" http:="" www.omg.org="" spec="" bpmn="" model"*xmlns:xsi="*"http://www.w3.org/2001/XMLSchema-instance"*xmlns:activiti=*"http://activiti.org/bpmn"*xmlns:bpmndi=*"http://www.omg.org/spec/BPMN/20100524/DI"*xmlns:omgdc=*"http://www.omg.org/spec/DD/20100524/DC"*xmlns:omgdi=*"http://www.omg.org/spec/DD/20100524/DI"*typeLanguage=*"http://www.w3.org/2001/XMLSchema"*expressionLanguage=*"http://www.w3.org/1999/XPath"*targetNamespace=*"http://www.activiti.org/test"*""><br><br>  <process id="*" helloworld"*"="" name="*"><br><br>​    <documentation>Place documentation for the ‘HelloWorld’ process here.</documentation><br><br>​    <startevent id="*" startevent1"*"="" name="*" start"*"=""></startevent><br><br>​    <usertask id="*" usertask1"*"="" name="*" user"="" task"*="" activiti:assignee="*" kermit"*"=""></usertask><br><br>​    <endevent id="*" endevent1"*"="" name="*" end"*"=""></endevent><br><br>​    <sequenceflow id="*" flow1"*"="" name="*" "*"="" sourceref="*" startevent1"*"="" targetref="*" usertask1"*"=""></sequenceflow><br><br>​    <sequenceflow id="*" flow2"*"="" name="*" "*"="" sourceref="*" usertask1"*"="" targetref="*" endevent1"*"=""></sequenceflow><br><br>  </process><br><br>  <bpmndi:bpmndiagram id="*" bpmndiagram_helloworld"*"=""><br><br>​    <bpmndi:bpmnplane bpmnelement="*" helloworld"*"="" id="*" bpmnplane_helloworld"*"=""><br><br>​      <bpmndi:bpmnshape bpmnelement="*" startevent1"*"="" id="*" bpmnshape_startevent1"*"=""><br><br>​        <omgdc:bounds height="*" 35"*"="" width="*" x="*" 80"*"="" y="*" 200"*"=""></omgdc:bounds><br><br>​      </bpmndi:bpmnshape><br><br>​      <bpmndi:bpmnshape bpmnelement="*" usertask1"*"="" id="*" bpmnshape_usertask1"*"=""><br><br>​        <omgdc:bounds height="*" 55"*"="" width="*" 105"*"="" x="*" 190"*"="" y="*"></omgdc:bounds><br><br>​      </bpmndi:bpmnshape><br><br>​      <bpmndi:bpmnshape bpmnelement="*" endevent1"*"="" id="*" bpmnshape_endevent1"*"=""><br><br>​        <omgdc:bounds height="*" 35"*"="" width="*" x="*" 400"*"="" y="*" 200"*"=""></omgdc:bounds><br><br>​      </bpmndi:bpmnshape><br><br>​      <bpmndi:bpmnedge bpmnelement="*" flow1"*"="" id="*" bpmnedge_flow1"*"=""><br><br>​        <omgdi:waypoint x="*" 115"*"="" y="*" 217"*"=""></omgdi:waypoint><br><br>​        <omgdi:waypoint x="*" 190"*"="" y="*" 217"*"=""></omgdi:waypoint><br><br>​      </bpmndi:bpmnedge><br><br>​      <bpmndi:bpmnedge bpmnelement="*" flow2"*"="" id="*" bpmnedge_flow2"*"=""><br><br>​        <omgdi:waypoint x="*" 295"*"="" y="*" 217"*"=""></omgdi:waypoint><br><br>​        <omgdi:waypoint x="*" 400"*"="" y="*" 217"*"=""></omgdi:waypoint><br><br>​      </bpmndi:bpmnedge><br><br>​    </bpmndi:bpmnplane><br><br>  </bpmndi:bpmndiagram><br><br></definitions>

<p>这里要提出的一点就是，由于Activiti Designer目前仍在研发，所以存在不少缺点。比如如果同时打开activiti文件和对应的bpmn20.xml文件，在对bpmn20.xml文件做修改后进行保存，eclipse的反应会很慢， 所以尽量关闭activiti文件。反过来如果保存activit文件，designer会覆盖bpmn20.xml，其覆盖结果可能会把你手都配置的bpmn20.xml打乱。我个人推荐用designer进行基本布局，然后保存生成bpmn20.xml文件，再手动去修改bpmn20.xml文件。最后在保存bpmn20.xml文件之前，删除原先的activiti文件及png文件，这样designer会根据bpmn20.xml文件重新生成这两个文件。</p>
<p>\6. 搭建测试环境。Activiti为我们提供了一个out of box的测试环境。首先去activiti的官网上下载<a href="http://www.activiti.org/download.html" target="_blank" rel="external">activiti-5.9.zip</a> 文件。</p>
<p>确保你的机器上安装的JRE和ANT，并配置后JAVA_HOME和ANT_HOME。</p>
<p>解压zip文件到任意目录，这里我们用ACTIVITI_HOME代表解压目录。打开命令行窗口，跳转到ACTIVITI_HOME/setup目录，并输入ant demo.start命令，整个测试环境会自动搭建起来，我们需要做的就是喝茶，看着屏幕。</p>
<p>这里注意，第一次运行时，ant会执行很多命令，其中包括：</p>
<p><em>安装H2数据库
</em>下载并安装tomcat</p>
<p>补充一点，如果你已经有现成的tomcat, 可以自己手动修改下build文件，这样可以避免重复下载，节约时间。如果懒得修改也可以，就让ant帮你把一切搞定。修改步骤如下：</p>
<p>与ACTIVITI_HOME同级目录建立文件夹” downloads”,如图：</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image021.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image021.png" alt="img"></a></p>
<p>拷贝你的tomcat压缩文件到此文件夹</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image023.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image023.png" alt="img"></a><br>修改ACTIVITI_HOME/ setup/build.properties文件：</p>
<p>tomcat.version=6.0.35</p>
<p>注意这里的版本号要与你的tomcat压缩文件一致。</p>
<p>好了，接下来我们要做的就是启动ant任务了。打开cmd或者terminal窗口，跳转到ACTIVITI_HOME/setup目录下，输入</p>
<p>ant demo.start</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image025.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image025.png" alt="img"></a></p>
<p>接下来就是等待。取决于你是否修改了tomcat的下载，修改的话只要1分钟不到，就会弹出浏览器，并显示系统登录页面：<a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image027.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image027.png" alt="img"></a></p>
<p>这里我们用id: kermit, passwd: Kermit(这个账号是administrator)进行登录。登录后画面如下:</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image029.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image029.png" alt="img"></a></p>
<p>\7. 剩下最后一步就是部署我们刚刚创建的工作流了。点击顶部的Manage，再点击Deployments -&gt; Upload new</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image031.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image031.png" alt="img"></a></p>
<p>在弹出的文件选择对话框中选择我们上面创建的HelloWorld.bpmn20.xml文件, 部署结果如下：</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image033.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image033.png" alt="img"></a></p>
<p>部署成功了，很开心。最后我们要做的就是启动这个HelloWorld，看看我们的劳动成果。当然这个懒惰的工作流什么也没做:(。点击顶部的Process，在左侧选择我们的HelloWorld工作流，再点击右上方的Start process：</p>
<p><a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image035.png" target="_blank" rel="external"><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image035.png" alt="img"></a></p>
<p>这时候我们会发现画面自动切换到Tasks页面，并且在左上方的Inbox标题框上多了一个”1”，意思是多了一个新任务</p>
<p><img src="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image037.png" alt="img">(<a href="http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image037.png" target="_blank" rel="external">http://www.ecmkit.com/sites/default/files/wp-content/uploads/2012/03/image037.png</a>)</p>

      
    </div>
    <footer class="article-footer">
      <ul class="article-meta">
        <li>
          <span class="label">Published Date:</span>
          <a href="/2017/12/26/activiti/" class="article-date">
  <time datetime="2017-12-25T19:42:27.000Z" itemprop="datePublished">2017-12-26</time>
</a>

        </li>
        
        
        <hr/>
      </ul>
    </footer>
  </div>
  
    
<nav id="article-nav" class="article-nav">
  
    <span id="article-nav-newer" class="article-nav-link-wrap newer"></span>
  
  
    <a href="/2017/12/21/binbash/" id="article-nav-older" class="article-nav-link-wrap older">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">为docker编写bash启动脚本</div>
    </a>
  
</nav>


  
</article>




      </div>
      
    <footer id="footer" class="post-footer footer">
      <hr/>
      <div id="footerContent" class="footer-content">
        <p>闲步山雨后,静待晚林风 Post</p>


      </div>
    </footer>

      

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/typing.js"></script>
<!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->







    </div>
  </body>
</html>
