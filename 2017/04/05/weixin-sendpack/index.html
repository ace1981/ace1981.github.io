<!DOCTYPE html>
<html>
  
  <body>
    <div class="container">
      <header class="header">
  <div class="blog-title">
    <a href="/" class="logo">Ace&#39;pages</a>
    <div class="subtitle"></div>
  </div>
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link">主页</a>
        </li>
      
        <li class="menu-item">
          <a href="/archives" class="menu-item-link">归档</a>
        </li>
      
        <li class="menu-item">
          <a href="/about" class="menu-item-link">关于</a>
        </li>
      
    </ul>
  </nav>
</header>
<article class="post">
  <div class="post-title">
    <h1 class="article-title">微信红包对接</h1>
  </div>
   <div class="post-meta">
    <span class="post-time">2017-04-05</span>
  </div>
  <div class="post-content">
    <p>1 要完成的目标</p>
<p>​    用户在移动app内消费积累积分,用户使用积分兑换微信红包</p>
<p>2 必要的准备</p>
<p>​    微信开发者,微信商户,微信公众号注册申请审核通过</p>
<p>3 了解知识</p>
<p>​    微信移动应用可第三方登录,app支付;微信公众号可发红包;</p>
<p>​    微信平台下,可以把公众号和app应用理解为2个应用,他们对于同一个用户分配不同的openid,而支付过程需要这个openid,关联两个id的unionid是相同的</p>
<p>所以在做微信红包的流程,首先移动端微信认证 记录下openid和unionid,用户关注公众号,利用接口记录下响应的openid和unionid,然后把app帐号和公众号的openid按unionid进行绑定,以备使用</p>
<p>4 服务端发红包接口除了必要的参数还需要安装证书</p>
<p>​    登录商户端,下载证书,java环境使用apiclient_cert.p12,windows下双击安装,密钥为商户id</p>
<p>发红包请求时,使用ssl带上这个证书即可</p>

  </div>
  <div class="post-footer">
    
      <ul class="post-tag-list"><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/支付/">支付</a></li></ul>
    

    <a href="#top" class="top">返回顶部</a>
  </div>
</article>
<footer>
  &copy; 2017
  <span class="author">
    ace1981
  </span>
</footer>
    </div>
  </body>
</html>